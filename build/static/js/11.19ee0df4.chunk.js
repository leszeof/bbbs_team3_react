(this.webpackJsonpbbbs_team3_react=this.webpackJsonpbbbs_team3_react||[]).push([[11],{180:function(t,e,n){"use strict";var c=n(2),i=(n(182),n(0));function a(t){var e=t.filterList,n=t.name,a=t.handleClick,r=["tags",t.sectionClass].join(" ").trim(),o=["tags__list",e.length>3?"tags__list_mobile":""].join(" ").trim();return Object(i.jsx)("div",{className:r,children:Object(i.jsx)("ul",{className:o,children:e.map((function(t){return Object(i.jsx)("li",{className:"tags__list-item",children:Object(i.jsx)(c.r,{name:n,value:null===t||void 0===t?void 0:t.filter,title:null===t||void 0===t?void 0:t.name,isActive:null===t||void 0===t?void 0:t.isActive,onClick:a})},null===t||void 0===t?void 0:t.name)}))})})}a.defaultProps={filterList:[],sectionClass:"",name:"",handleClick:function(){}},e.a=a},181:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return a})),n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o}));var c=function(t,e){var n=e.inputValue,c=e.isChecked;t((function(t){return t.map((function(t){return t.filter===n&&(t.isActive=c),t}))}))},i=function(t,e){var n=e.inputValue,c=e.isChecked;t((function(t){return t.map((function(t){return t.filter===n?t.isActive=c:t.isActive=!1,t}))}))},a=function(t,e){t((function(t){return t.map((function(t){return t.filter===e?t.isActive=!0:t.isActive=!1,t}))}))},r=function(t,e){t((function(t){return t.map((function(t){return t.filter===e&&(t.isActive=!1),t}))}))},o=function(t){t((function(t){return t.map((function(t){return t.isActive=!1,t}))}))}},182:function(t,e,n){},196:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return s}));var c=n(14),i=n.n(c),a=n(6);function r(t){var e=t.limit,n=t.offset,c=t.types;return i.a.get("".concat(a.b).concat(a.a,"/books/"),{params:{types:c,limit:e,offset:n}}).then((function(t){return t.data})).catch((function(t){return Promise.reject(new Error("".concat(t.message)))}))}function o(){return i.a.get("".concat(a.b).concat(a.a,"/books/types/")).then((function(t){return t.data})).catch((function(t){return Promise.reject(new Error("".concat(t.message)))}))}function s(t){return i.a.get("".concat(a.b).concat(a.a,"/books/").concat(t)).then((function(t){return t.data})).catch((function(t){return Promise.reject(new Error("".concat(t.message)))}))}},237:function(t,e,n){},265:function(t,e,n){"use strict";n.r(e);var c=n(46),i=n(5),a=n(1),r=n(16),o=n(3),s={headTitle:"".concat(o.l," | ").concat(o.g),headDescription:"\u041f\u043e\u0434\u0431\u043e\u0440\u043a\u0430 \u043a\u043d\u0438\u0433, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u043f\u043e\u0447\u0438\u0442\u0430\u0442\u044c, \u0441 \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0435\u0439 \u043a \u043d\u0438\u043c.",title:o.g,textStubNoData:"\u0412 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0441 \u043a\u043d\u0438\u0433\u0430\u043c\u0438 \u043f\u0443\u0441\u0442\u0430. \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0439\u0442\u0435\u0441\u044c \u043f\u043e\u0437\u0436\u0435!"},u=n(7),l=n(196),f=n(44),j=n(49),b=n(45),d=n(180),O=n(25),h=n(2),v=n(11),m=n(4),g=n(181),p=n(8),x=(n(237),n(0)),_=8,k=12,C=16,E=1216,w=1640,S=s.headTitle,A=s.headDescription,L=s.title,N=s.textStubNoData;e.default=function(){var t=Object(a.useContext)(p.c).setError,e=Object(a.useContext)(p.d).openPopupError,n=Object(r.h)().state,o=null===n||void 0===n?void 0:n.id,s=Object(a.useState)({}),P=Object(i.a)(s,2),y=P[0],D=P[1],M=Object(a.useState)(!0),T=Object(i.a)(M,2),F=T[0],V=T[1],J=Object(a.useState)(!1),q=Object(i.a)(J,2),z=q[0],B=q[1],G=Object(a.useState)(null),H=Object(i.a)(G,2),I=H[0],K=H[1],Q=Object(a.useState)(null),R=Object(i.a)(Q,2),U=R[0],W=R[1],X=Object(a.useState)(!1),Y=Object(i.a)(X,2),Z=Y[0],$=Y[1],tt=Object(a.useState)(null),et=Object(i.a)(tt,2),nt=et[0],ct=et[1],it=Object(a.useState)(0),at=Object(i.a)(it,2),rt=at[0],ot=at[1],st=Object(a.useState)(0),ut=Object(i.a)(st,2),lt=ut[0],ft=ut[1],jt=Object(a.useState)(!1),bt=Object(i.a)(jt,2),dt=bt[0],Ot=bt[1],ht=Object(a.useState)(!1),vt=Object(i.a)(ht,2),mt=vt[0],gt=vt[1],pt=function(){return U?U.filter((function(t){return t.isActive&&t.filter!==m.a})).map((function(t){return t.filter})).join(","):null},xt=function(n){var c=Z?0:nt*lt,i=n||pt();Object(l.b)({limit:nt,offset:c,types:i}).then((function(t){var e=t.results,n=t.count;return ot(Math.ceil(n/nt)),e})).then((function(t){return K(t)})).catch((function(){Z?(t(m.g.filterErrorMessage),e()):Ot(!0)})).finally((function(){V(!1),B(!1),$(!1)}))},_t=function(t,e){t===m.a?Object(g.e)(W,m.a):(Object(g.c)(W,{inputValue:t,isChecked:e}),Object(g.b)(W,m.a)),$(!0)};Object(a.useEffect)((function(){n&&Object(l.a)(o).then((function(t){D(t),gt(!0)})).catch((function(){return Ot(!0)}))}),[n]);var kt=Object(u.f)((function(){if(U&&Z){var t=pt();0===t.length&&Object(g.e)(W,m.a),xt(t)}}),m.d),Ct=Object(u.f)(xt,m.d);return Object(a.useEffect)((function(){Z&&kt()}),[Z]),Object(a.useEffect)((function(){F&&nt&&(xt(),Object(l.c)().then((function(t){var e=t.map((function(t){return{filter:null===t||void 0===t?void 0:t.slug.toLowerCase(),name:Object(v.a)(null===t||void 0===t?void 0:t.name),isActive:!1}}));W([{filter:m.a,name:m.a,isActive:!0}].concat(Object(c.a)(e)))})).catch((function(){return Ot(!0)}))),F||Z||(B(!0),Ct())}),[nt,lt]),Object(a.useEffect)((function(){var t=window.matchMedia("(max-width: ".concat(E,"px)")),e=window.matchMedia("(max-width: ".concat(w,"px)")),n=function(){t.matches?ct(_):e.matches?ct(k):ct(C)};return n(),t.addEventListener("change",n),e.addEventListener("change",n),function(){t.removeEventListener("change",n),e.removeEventListener("change",n)}}),[]),F?Object(x.jsx)(h.k,{isCentered:!0}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(f.a,{headTitle:S,headDescription:A,children:Object(x.jsx)("section",{className:"books page__section fade-in",children:function(){if(dt)return Object(x.jsx)(b.a,{titleText:m.g.generalErrorMessage.title});return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(h.w,{title:L,sectionClass:"books__title"}),(null===U||void 0===U?void 0:U.length)>1&&Object(x.jsx)(d.a,{filterList:U,name:"tag",handleClick:_t}),Z?Object(x.jsx)(h.k,{isPaginate:!0}):Et()]})}()})}),Object(x.jsx)(O.c,{isOpen:mt,onClose:function(){gt(!1)},book:y})]});function Et(){return I||F?Object(x.jsxs)(x.Fragment,{children:[z?Object(x.jsx)(h.k,{isPaginate:!0}):Object(x.jsx)("ul",{className:"books__cards cards-grid cards-grid_content_small-cards fade-in",children:I.map((function(t){return Object(x.jsx)(j.a,{data:t,sectionClass:"scale-in"},t.id)}))}),rt>1&&Object(x.jsx)(h.q,{sectionClass:"cards-section__pagination",pageCount:rt,value:lt,onChange:ft})]}):Object(x.jsx)(b.a,{titleText:N})}}}}]);
//# sourceMappingURL=11.19ee0df4.chunk.js.map