{"version":3,"sources":["components/TagsList/TagsList.js","utils/filter-tags.js","api/books-page.js","pages/Books/locales/RU.js","pages/Books/Books.js"],"names":["TagsList","filterList","name","handleClick","classNames","sectionClass","join","trim","classNamesList","length","className","map","item","value","filter","title","isActive","onClick","defaultProps","handleCheckboxBehavior","setState","inputValue","isChecked","stateFilters","filterItem","handleRadioBehavior","selectOneTag","tagName","deselectOneTag","deselectAllTags","getBooksPageData","limit","offset","types","axios","get","baseURL","apiUrl","params","then","response","data","catch","err","Promise","reject","Error","message","getBooksPageFilter","getBook","id","booksPageTexts","headTitle","MAIN_PAGE_TITLE","BOOKS_TITLE","headDescription","textStubNoData","PAGE_SIZE_PAGINATE","maxScreenWidth","Books","setError","useContext","ErrorsContext","openPopupError","PopupsContext","state","useLocation","searchBookId","useState","searchedBook","setSearchedBook","isLoading","setIsLoading","isLoadingPaginate","setIsLoadingPaginate","booksPageData","setBooksPageData","categories","setCategories","isFiltersUsed","setIsFiltersUsed","pageSize","setPageSize","pageCount","setPageCount","pageNumber","setPageNumber","isPageError","setIsPageError","isBookPopupOpen","setIsBookPopupOpen","getActiveTags","ALL_CATEGORIES","getBooksData","activeCategories","activeTags","results","count","Math","ceil","ERROR_MESSAGES","filterErrorMessage","finally","changeCategory","useEffect","book","debounceFiltration","useDebounce","DELAY_DEBOUNCE","debouncePaginate","tags","categoriesArr","tag","slug","toLowerCase","changeCaseOfFirstLetter","smallQuery","window","matchMedia","largeQuery","listener","matches","addEventListener","removeEventListener","isCentered","BasePage","AnimatedPageContainer","titleText","generalErrorMessage","isPaginate","renderBooksContainer","renderPageContent","isOpen","onClose","books","CardBook","onChange"],"mappings":"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","file":"static/js/11.19ee0df4.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\nimport { PseudoButtonTag } from '../utils';\nimport './TagsList.scss';\n\nconst centeringFiltersMaxLength = 3;\n\nfunction TagsList({ filterList, name, handleClick, sectionClass }) {\n  const classNames = ['tags', sectionClass].join(' ').trim();\n  const classNamesList = [\n    'tags__list',\n    filterList.length > centeringFiltersMaxLength ? 'tags__list_mobile' : '',\n  ]\n    .join(' ')\n    .trim();\n\n  return (\n    <div className={classNames}>\n      <ul className={classNamesList}>\n        {filterList.map((item) => (\n          <li className=\"tags__list-item\" key={item?.name}>\n            <PseudoButtonTag\n              name={name}\n              value={item?.filter}\n              title={item?.name}\n              isActive={item?.isActive}\n              onClick={handleClick}\n            />\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nTagsList.propTypes = {\n  filterList: PropTypes.arrayOf(PropTypes.any),\n  sectionClass: PropTypes.string,\n  name: PropTypes.string,\n  handleClick: PropTypes.func,\n};\n\nTagsList.defaultProps = {\n  filterList: [],\n  sectionClass: '',\n  name: '',\n  handleClick: () => {},\n};\n\nexport default TagsList;\n","/* eslint-disable no-param-reassign */\nexport const handleCheckboxBehavior = (setState, { inputValue, isChecked }) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      if (filterItem.filter === inputValue) {\n        filterItem.isActive = isChecked;\n      }\n      return filterItem;\n    })\n  );\n};\n\nexport const handleRadioBehavior = (setState, { inputValue, isChecked }) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      if (filterItem.filter === inputValue) {\n        filterItem.isActive = isChecked;\n      } else {\n        filterItem.isActive = false;\n      }\n      return filterItem;\n    })\n  );\n};\n\nexport const selectOneTag = (setState, tagName) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      if (filterItem.filter === tagName) {\n        filterItem.isActive = true;\n      } else {\n        filterItem.isActive = false;\n      }\n      return filterItem;\n    })\n  );\n};\n\nexport const deselectOneTag = (setState, tagName) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      if (filterItem.filter === tagName) {\n        filterItem.isActive = false;\n      }\n      return filterItem;\n    })\n  );\n};\n\nexport const deselectAllTags = (setState) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      filterItem.isActive = false;\n      return filterItem;\n    })\n  );\n};\n","import axios from 'axios';\nimport { apiUrl, baseURL } from '../config/config';\n\n// работа со страницей книги\nfunction getBooksPageData({ limit, offset, types }) {\n  return axios\n    .get(`${baseURL}${apiUrl}/books/`, {\n      params: { types, limit, offset },\n    })\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(new Error(`${err.message}`)));\n}\n\n// все активные теги (фильтры)\nfunction getBooksPageFilter() {\n  return axios\n    .get(`${baseURL}${apiUrl}/books/types/`)\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(new Error(`${err.message}`)));\n}\n\n// получение одного книги\nfunction getBook(id) {\n  return axios\n    .get(`${baseURL}${apiUrl}/books/${id}`)\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(new Error(`${err.message}`)));\n}\n\nexport { getBooksPageData, getBooksPageFilter, getBook };\n","import { BOOKS_TITLE, MAIN_PAGE_TITLE } from '../../../config/routes';\n\nconst booksPageTexts = {\n  headTitle: `${MAIN_PAGE_TITLE} | ${BOOKS_TITLE}`,\n  headDescription: 'Подборка книг, которые можно почитать, с аннотацией к ним.',\n  title: BOOKS_TITLE,\n  textStubNoData:\n    'В данный момент страница с книгами пуста. Возвращайтесь позже!',\n};\n\nexport default booksPageTexts;\n","import { useContext, useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport booksPageTexts from './locales/RU';\nimport { useDebounce } from '../../hooks';\nimport {\n  getBook,\n  getBooksPageData,\n  getBooksPageFilter,\n} from '../../api/books-page';\nimport {\n  AnimatedPageContainer,\n  BasePage,\n  CardBook,\n  Loader,\n  Paginate,\n  PopupBook,\n  TagsList,\n  TitleH1,\n} from './index';\nimport { changeCaseOfFirstLetter } from '../../utils/utils';\nimport {\n  ALL_CATEGORIES,\n  DELAY_DEBOUNCE,\n  ERROR_MESSAGES,\n} from '../../config/constants';\nimport {\n  deselectOneTag,\n  handleCheckboxBehavior,\n  selectOneTag,\n} from '../../utils/filter-tags';\nimport { ErrorsContext, PopupsContext } from '../../contexts';\nimport './Books.scss';\n\nconst PAGE_SIZE_PAGINATE = {\n  mobile: 8,\n  medium: 12,\n  big: 16,\n};\n\nconst maxScreenWidth = {\n  small: 1216,\n  medium: 1640,\n};\n\nconst { headTitle, headDescription, title, textStubNoData } = booksPageTexts;\n\nfunction Books() {\n  const { setError } = useContext(ErrorsContext);\n  const { openPopupError } = useContext(PopupsContext);\n\n  const { state } = useLocation();\n  const searchBookId = state?.id;\n  const [searchedBook, setSearchedBook] = useState({});\n\n  // Загрузка данных\n  const [isLoading, setIsLoading] = useState(true);\n  const [isLoadingPaginate, setIsLoadingPaginate] = useState(false);\n  // Стейты с данными Книг, Теги\n  const [booksPageData, setBooksPageData] = useState(null);\n  const [categories, setCategories] = useState(null);\n  // флаг применения фильтров\n  const [isFiltersUsed, setIsFiltersUsed] = useState(false);\n  // Стейты для пагинации\n  const [pageSize, setPageSize] = useState(null);\n  const [pageCount, setPageCount] = useState(0);\n  const [pageNumber, setPageNumber] = useState(0);\n  // Стейт ошибки\n  const [isPageError, setIsPageError] = useState(false);\n  const [isBookPopupOpen, setIsBookPopupOpen] = useState(false);\n\n  const openPopupBook = () => {\n    setIsBookPopupOpen(true);\n  };\n\n  const closePopupBook = () => {\n    setIsBookPopupOpen(false);\n  };\n\n  const getActiveTags = () => {\n    if (categories) {\n      return categories\n        .filter((filter) => filter.isActive && filter.filter !== ALL_CATEGORIES)\n        .map((filter) => filter.filter)\n        .join(',');\n    }\n    return null;\n  };\n\n  const getBooksData = (activeCategories) => {\n    const offset = isFiltersUsed ? 0 : pageSize * pageNumber;\n    const activeTags = activeCategories || getActiveTags();\n\n    getBooksPageData({\n      limit: pageSize,\n      offset,\n      types: activeTags,\n    })\n      .then(({ results, count }) => {\n        setPageCount(Math.ceil(count / pageSize));\n        return results;\n      })\n      .then((results) => setBooksPageData(results))\n      .catch(() => {\n        if (isFiltersUsed) {\n          setError(ERROR_MESSAGES.filterErrorMessage);\n          openPopupError();\n        } else {\n          setIsPageError(true);\n        }\n      })\n      .finally(() => {\n        setIsLoading(false);\n        setIsLoadingPaginate(false);\n        setIsFiltersUsed(false);\n      });\n  };\n\n  const getBooksFilter = () => {\n    getBooksPageFilter()\n      .then((tags) => {\n        const categoriesArr = tags.map((tag) => ({\n          filter: tag?.slug.toLowerCase(),\n          name: changeCaseOfFirstLetter(tag?.name),\n          isActive: false,\n        }));\n\n        setCategories([\n          { filter: ALL_CATEGORIES, name: ALL_CATEGORIES, isActive: true },\n          ...categoriesArr,\n        ]);\n      })\n      .catch(() => setIsPageError(true));\n  };\n\n  // хэндлер клика по фильтру КАТЕГОРИЯ\n  const changeCategory = (inputValue, isChecked) => {\n    if (inputValue === ALL_CATEGORIES) {\n      selectOneTag(setCategories, ALL_CATEGORIES);\n    } else {\n      handleCheckboxBehavior(setCategories, { inputValue, isChecked });\n      deselectOneTag(setCategories, ALL_CATEGORIES);\n    }\n    setIsFiltersUsed(true);\n  };\n\n  // функция-фильтратор с использованием АПИ\n  const handleFiltration = () => {\n    if (categories && isFiltersUsed) {\n      const activeCategories = getActiveTags();\n\n      if (activeCategories.length === 0) {\n        selectOneTag(setCategories, ALL_CATEGORIES);\n      }\n      getBooksData(activeCategories);\n    }\n  };\n\n  // Откртие попапа при переходе из поиска\n  useEffect(() => {\n    if (state) {\n      getBook(searchBookId)\n        .then((book) => {\n          setSearchedBook(book);\n          openPopupBook();\n        })\n        .catch(() => setIsPageError(true));\n    }\n  }, [state]);\n\n  /// Фильтрация с делэем\n  const debounceFiltration = useDebounce(handleFiltration, DELAY_DEBOUNCE);\n  const debouncePaginate = useDebounce(getBooksData, DELAY_DEBOUNCE);\n  useEffect(() => {\n    if (isFiltersUsed) {\n      debounceFiltration();\n    }\n  }, [isFiltersUsed]);\n\n  // Первая отрисовка страницы + переход по страницам пагинации\n  useEffect(() => {\n    if (isLoading && pageSize) {\n      getBooksData();\n      getBooksFilter();\n    }\n\n    if (!isLoading && !isFiltersUsed) {\n      setIsLoadingPaginate(true);\n      debouncePaginate();\n    }\n  }, [pageSize, pageNumber]);\n\n  useEffect(() => {\n    const smallQuery = window.matchMedia(\n      `(max-width: ${maxScreenWidth.small}px)`\n    );\n    const largeQuery = window.matchMedia(\n      `(max-width: ${maxScreenWidth.medium}px)`\n    );\n\n    const listener = () => {\n      if (smallQuery.matches) {\n        setPageSize(PAGE_SIZE_PAGINATE.mobile);\n      } else if (largeQuery.matches) {\n        setPageSize(PAGE_SIZE_PAGINATE.medium);\n      } else {\n        setPageSize(PAGE_SIZE_PAGINATE.big);\n      }\n    };\n    listener();\n    smallQuery.addEventListener('change', listener);\n    largeQuery.addEventListener('change', listener);\n\n    return () => {\n      smallQuery.removeEventListener('change', listener);\n      largeQuery.removeEventListener('change', listener);\n    };\n  }, []);\n\n  // глобальный лоадер\n  if (isLoading) {\n    return <Loader isCentered />;\n  }\n\n  return (\n    <>\n      <BasePage headTitle={headTitle} headDescription={headDescription}>\n        <section className=\"books page__section fade-in\">\n          {renderPageContent()}\n        </section>\n      </BasePage>\n      <PopupBook\n        isOpen={isBookPopupOpen}\n        onClose={closePopupBook}\n        book={searchedBook}\n      />\n    </>\n  );\n\n  function renderPageContent() {\n    if (isPageError) {\n      return (\n        <AnimatedPageContainer\n          titleText={ERROR_MESSAGES.generalErrorMessage.title}\n        />\n      );\n    }\n    return (\n      <>\n        <TitleH1 title={title} sectionClass=\"books__title\" />\n\n        {/* рендер фильтров */}\n        {categories?.length > 1 && (\n          <TagsList\n            filterList={categories}\n            name=\"tag\"\n            handleClick={changeCategory}\n          />\n        )}\n\n        {/* рендерим книги */}\n        {isFiltersUsed ? <Loader isPaginate /> : renderBooksContainer()}\n      </>\n    );\n  }\n\n  function renderBooksContainer() {\n    if (!booksPageData && !isLoading) {\n      return renderAnimatedContainer();\n    }\n    return (\n      <>\n        {isLoadingPaginate ? (\n          <Loader isPaginate />\n        ) : (\n          <ul className=\"books__cards cards-grid cards-grid_content_small-cards fade-in\">\n            {booksPageData.map((books) => (\n              <CardBook key={books.id} data={books} sectionClass=\"scale-in\" />\n            ))}\n          </ul>\n        )}\n        {pageCount > 1 && (\n          <Paginate\n            sectionClass=\"cards-section__pagination\"\n            pageCount={pageCount}\n            value={pageNumber}\n            onChange={setPageNumber}\n          />\n        )}\n      </>\n    );\n  }\n\n  // контейнер заглушки\n  function renderAnimatedContainer() {\n    return <AnimatedPageContainer titleText={textStubNoData} />;\n  }\n}\n\nexport default Books;\n"],"sourceRoot":""}