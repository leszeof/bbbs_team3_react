{"version":3,"sources":["api/rights-page.js","pages/RightsArticle/locales/RU.js","pages/RightsArticle/RightsArticle.js"],"names":["getRightsData","limit","offset","tags","axios","get","baseURL","apiUrl","params","then","response","data","catch","err","Promise","reject","Error","message","getRightsTags","getRightsArticle","id","rightsArticlePageTexts","headTitle","headDescription","stubButtonText","RightsArticle","articleId","useParams","state","useLocation","history","useHistory","useScrollToTop","useState","articleData","setArticleData","isLoadingPage","setIsLoadingPage","isPageError","setIsPageError","getArticleData","res","status","ERROR_CODES","notFound","push","NOT_FOUND_URL","finally","useEffect","fromRightsPage","activeTags","BasePage","title","description","isHeaderTransparentOnTop","isPaginate","AnimatedPageContainer","titleText","ERROR_MESSAGES","generalErrorMessage","urlBack","RIGHTS_URL","buttonText","staticPage","className","body","renderNextPageBlock","renderMainContent","nextArticle","link","pathname","text","href"],"mappings":"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","file":"static/js/19.fa1635fd.chunk.js","sourcesContent":["import axios from 'axios';\nimport { apiUrl, baseURL } from '../config/config';\n\n// получение всех \"прав\" на странице Права\nfunction getRightsData({ limit, offset, tags }) {\n  return axios\n    .get(`${baseURL}${apiUrl}/rights/`, {\n      params: { tags, limit, offset },\n    })\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(new Error(`${err.message}`)));\n}\n\n// получение категорий прав (список фильтров)\nfunction getRightsTags() {\n  return axios\n    .get(`${baseURL}${apiUrl}/rights/tags/`)\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(new Error(`${err.message}`)));\n}\n\n// получение Статьи для страницы Права Детей\nfunction getRightsArticle({ id, tags = '' }) {\n  return axios\n    .get(`${baseURL}${apiUrl}/rights/${id}/`, {\n      params: { tags },\n    })\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(err?.response));\n}\n\nexport { getRightsData, getRightsTags, getRightsArticle };\n","const rightsArticlePageTexts = {\n  headTitle: 'Статья',\n  headDescription: 'Полезная статья',\n  stubButtonText: 'Вернуться назад',\n};\n\nexport default rightsArticlePageTexts;\n","import { useEffect, useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { useHistory, useLocation, useParams } from 'react-router-dom';\nimport rightsArticlePageTexts from './locales/RU';\nimport { useScrollToTop } from '../../hooks';\nimport { getRightsArticle } from '../../api/rights-page';\nimport { ERROR_CODES, ERROR_MESSAGES } from '../../config/constants';\nimport { NOT_FOUND_URL, RIGHTS_URL } from '../../config/routes';\nimport {\n  AnimatedPageContainer,\n  BasePage,\n  Loader,\n  NextArticleLink,\n} from './index';\nimport './RightsArticle.scss';\n\nconst { headTitle, headDescription, stubButtonText } = rightsArticlePageTexts;\n\nfunction RightsArticle() {\n  const { articleId } = useParams();\n  const { state } = useLocation();\n  const history = useHistory();\n\n  useScrollToTop([articleId]);\n\n  const [articleData, setArticleData] = useState(null);\n  const [isLoadingPage, setIsLoadingPage] = useState(true);\n  // Стейт ошибки\n  const [isPageError, setIsPageError] = useState(false);\n\n  const getArticleData = ({ id, tags }) => {\n    getRightsArticle({ id, tags })\n      .then((res) => setArticleData(res))\n      .catch((err) => {\n        if (err.status === ERROR_CODES.notFound) history.push(NOT_FOUND_URL);\n        else setIsPageError(true);\n      })\n      .finally(() => {\n        setIsLoadingPage(false);\n      });\n  };\n\n  useEffect(() => {\n    if (articleId) {\n      setIsLoadingPage(true);\n      if (state?.fromRightsPage) {\n        getArticleData({ id: articleId, tags: state.activeTags });\n      } else {\n        getArticleData({ id: articleId, tags: '' });\n      }\n    }\n  }, [articleId]);\n\n  return (\n    <BasePage\n      headTitle={articleData?.title ?? headTitle}\n      headDescription={articleData?.description ?? headDescription}\n      isHeaderTransparentOnTop\n    >\n      {isLoadingPage ? <Loader isPaginate /> : renderMainContent()}\n    </BasePage>\n  );\n\n  function renderMainContent() {\n    if (isPageError) {\n      return (\n        <AnimatedPageContainer\n          titleText={ERROR_MESSAGES.generalErrorMessage.title}\n          urlBack={RIGHTS_URL}\n          buttonText={stubButtonText}\n          staticPage\n        />\n      );\n    }\n\n    return (\n      <>\n        {renderLeadBlock()}\n        <div className=\"rights-article page__section fade-in\">\n          <div className=\"rights-article__container\">\n            {renderHtmlBlock()}\n            {renderNextPageBlock()}\n          </div>\n        </div>\n      </>\n    );\n  }\n\n  function renderLeadBlock() {\n    return (\n      <section className=\"article-lead fade-in\">\n        <div className=\"article-lead__content\">\n          <h1 className=\"chapter-title article-lead__title\">\n            {articleData?.title}\n          </h1>\n          <p className=\"section-title article-lead__text\">\n            {articleData?.description}\n          </p>\n        </div>\n      </section>\n    );\n  }\n\n  function renderHtmlBlock() {\n    return (\n      <ReactMarkdown className=\"markdown rights-article__markdown\">\n        {articleData?.body}\n      </ReactMarkdown>\n    );\n  }\n\n  function renderNextPageBlock() {\n    if (articleData && articleData.nextArticle) {\n      // если пришли со страницы Прав, то передаём активные теги в линку\n      const link = state?.fromRightsPage\n        ? {\n            pathname: `/rights/${articleData?.nextArticle?.id}`,\n            state: { fromRightsPage: true, activeTags: state.activeTags },\n          }\n        : `/rights/${articleData?.nextArticle?.id}`;\n\n      return (\n        <NextArticleLink text={articleData.nextArticle.title} href={link} />\n      );\n    }\n    return null;\n  }\n}\n\nexport default RightsArticle;\n"],"sourceRoot":""}