(this.webpackJsonpbbbs_team3_react=this.webpackJsonpbbbs_team3_react||[]).push([[20],{181:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}));var i=function(t,e){var n=e.inputValue,i=e.isChecked;t((function(t){return t.map((function(t){return t.filter===n&&(t.isActive=i),t}))}))},c=function(t,e){var n=e.inputValue,i=e.isChecked;t((function(t){return t.map((function(t){return t.filter===n?t.isActive=i:t.isActive=!1,t}))}))},s=function(t,e){t((function(t){return t.map((function(t){return t.filter===e?t.isActive=!0:t.isActive=!1,t}))}))},o=function(t,e){t((function(t){return t.map((function(t){return t.filter===e&&(t.isActive=!1),t}))}))},a=function(t){t((function(t){return t.map((function(t){return t.isActive=!1,t}))}))}},246:function(t,e,n){},259:function(t,e,n){"use strict";n.r(e);var i=n(46),c=n(5),s=n(1),o=n(198),a=n(201),r=n(16),l=n(239),u=n(3),d={headTitle:"".concat(u.l," | \u0418\u0441\u0442\u043e\u0440\u0438\u0438 \u0434\u0440\u0443\u0436\u0431\u044b"),headDescription:"\u0418\u0441\u0442\u043e\u0440\u0438\u0438 \u0434\u0440\u0443\u0436\u0431\u044b \u0441 \u043c\u043b\u0430\u0434\u0448\u0438\u043c\u0438 \u043e\u0442 \u043d\u0430\u0448\u0438\u0445 \u043d\u0430\u0441\u0442\u0430\u0432\u043d\u0438\u043a\u043e\u0432",title:"\u0418\u0441\u0442\u043e\u0440\u0438\u0438 \u0434\u0440\u0443\u0436\u0431\u044b",subtitle:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043d\u0430\u0448\u0435\u0439 \u0440\u0430\u0431\u043e\u0442\u044b \u0441\u043b\u043e\u0436\u043d\u043e \u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0446\u0438\u0444\u0440\u0430\u043c\u0438. \u041a\u0430\u043a \u0438\u0437\u043c\u0435\u0440\u0438\u0442\u044c \u0438 \u0432\u0437\u0432\u0435\u0441\u0438\u0442\u044c \u0434\u0440\u0443\u0436\u0431\u0443? \u041a\u0430\u043a \u043e\u0446\u0435\u043d\u0438\u0442\u044c \u0443\u0441\u043f\u0435\u0445\u0438 \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u043e \u0440\u0430\u0437\u043d\u044b\u0445 \u0434\u0435\u0442\u0435\u0439? \u0423 \u043a\u0430\u0436\u0434\u043e\u0439 \u043f\u0430\u0440\u044b \u2014 \u0441\u0432\u043e\u0439 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0438 \u0441\u0432\u043e\u0438 \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f. \u0418\u043c\u0435\u043d\u043d\u043e \u043e\u0431 \u044d\u0442\u043e\u043c \u043c\u044b \u0440\u0430\u0441\u0441\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u043c \u0432 \u0438\u0441\u0442\u043e\u0440\u0438\u044f\u0445.",textStubNoData:"\u0412 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u0441\u043e \u0438\u0441\u0442\u043e\u0440\u0438\u044f\u043c\u0438 \u0434\u0440\u0443\u0436\u0431\u044b \u043f\u0443\u0441\u0442\u0430. \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0439\u0442\u0435\u0441\u044c \u043f\u043e\u0437\u0436\u0435!"},f=n(4),j=n(8),b=n(6),m=n(14),v=n.n(m);var h=n(11),O=n(181),_=n(44),p=n(45),x=n(25),g=n(2),k=(n(246),n(0)),C=[0,65],w=[0,15],N=[0,7.5],S=706,A=1100,E=d.headTitle,T=d.headDescription,y=d.title,D=d.subtitle,P=d.textStubNoData;e.default=function(){var t,e,n,d,m,B=Object(r.i)().storyId,F=Object(r.g)(),M=Object(s.useContext)(j.b).currentUser,V=Object(s.useState)(!0),I=Object(c.a)(V,2),L=I[0],J=I[1],R=Object(s.useState)(!1),q=Object(c.a)(R,2),K=q[0],U=q[1],z=Object(s.useState)(!1),G=Object(c.a)(z,2),H=G[0],Q=G[1],W=Object(s.useState)([]),X=Object(c.a)(W,2),Y=X[0],Z=X[1],$=Object(s.useState)(0),tt=Object(c.a)($,2),et=tt[0],nt=tt[1],it=Object(s.useState)(null),ct=Object(c.a)(it,2),st=ct[0],ot=ct[1],at=Object(s.useState)(!1),rt=Object(c.a)(at,2),lt=rt[0],ut=rt[1],dt=Object(s.useState)({}),ft=Object(c.a)(dt,2),jt=ft[0],bt=ft[1],mt=+(null!==B&&void 0!==B?B:null===(t=Y[0])||void 0===t?void 0:t.filter),vt=null!==(e=null===st||void 0===st||null===(n=st.mentor)||void 0===n?void 0:n.firstName)&&void 0!==e?e:"",ht=null!==(d=null===st||void 0===st?void 0:st.child)&&void 0!==d?d:"",Ot="".concat(vt," \u0438 ").concat(ht),_t=Object(h.b)(null===st||void 0===st?void 0:st.togetherSince),pt="\u0412\u043c\u0435\u0441\u0442\u0435 \u0441 ".concat(Object(h.d)(null===_t||void 0===_t?void 0:_t.monthName)," ").concat(null===_t||void 0===_t?void 0:_t.year," \u0433\u043e\u0434\u0430"),xt="\u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c ".concat(Object(l.inclineFirstname)(vt,"dative")),gt="".concat(u.D,"/").concat(null===st||void 0===st||null===(m=st.nextArticle)||void 0===m?void 0:m.id),kt=Object(s.useRef)(null),Ct=Object(s.useState)(C),wt=Object(c.a)(Ct,2),Nt=wt[0],St=wt[1],At=function(t,e){bt({photoSrc:t,caption:e}),ut(!0)},Et=function(t){Object(O.d)(Z,{inputValue:t,isChecked:!0}),F.push("".concat(u.D,"/").concat(t))},Tt=function(t){var e=t.limit,n=t.offset;et<=Y.length&&function(t){var e=t.limit,n=t.offset;return v.a.get("".concat(b.b).concat(b.a,"/history/"),{params:{limit:e,offset:n}}).then((function(t){return t.data})).catch((function(t){return Promise.reject(new Error("".concat(t.message)))}))}({limit:e,offset:n}).then((function(t){var n=t.results;if(null===n||void 0===n?void 0:n.length){var c=n.map((function(t){return{filter:t.id,name:t.pair,isActive:+B===+t.id}}));Z((function(t){return[].concat(Object(i.a)(t),Object(i.a)(c))})),nt((function(t){return t+e}))}else J(!1)})).catch((function(){Q(!0),J(!1)}))},yt=function(){mt===Y[Y.length-1].filter&&Tt({limit:10,offset:et})};Object(s.useEffect)((function(){var t=window.matchMedia("(max-width: ".concat(A,"px)")),e=window.matchMedia("(max-width: ".concat(S,"px)")),n=function(){return e.matches?St(N):t.matches?St(w):St(C)};return n(),e.addEventListener("change",n),t.addEventListener("change",n),function(){e.removeEventListener("change",n),t.removeEventListener("change",n)}}),[]),Object(s.useEffect)((function(){Tt({limit:10,offset:et})}),[]),Object(s.useEffect)((function(){var t;mt&&(U(!0),(t=mt,v.a.get("".concat(b.b).concat(b.a,"/history/").concat(t,"/")).then((function(t){return t.data})).catch((function(t){return Promise.reject(null===t||void 0===t?void 0:t.response)}))).then(ot).catch((function(t){t.status===f.f.notFound?F.push(u.q):Q(!0)})).finally((function(){U(!1),L&&J(!1)})))}),[mt]),Object(s.useEffect)((function(){if(Y.length){var t=Y.find((function(t){return t.filter===mt}));t&&Object(O.d)(Z,{inputValue:t.filter,isChecked:!0})}}),[mt,et]);var Dt=Object(s.useRef)(null);return Object(s.useEffect)((function(){Dt&&Dt.current&&setTimeout((function(){Dt.current.scrollIntoView({behavior:"smooth"})}),150)}),[B]),L?Object(k.jsx)(g.k,{isCentered:!0}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(_.a,{headTitle:E,headDescription:T,children:function(){if(H)return Object(k.jsx)(p.a,{titleText:f.g.generalErrorMessage.title});if(!Y.length&&!st)return Object(k.jsx)(p.a,{titleText:P});return Object(k.jsxs)("div",{className:"stories page__section fade-in",children:[Object(k.jsx)(g.w,{title:y,sectionClass:"stories__title"}),Object(k.jsx)("p",{className:"stories__subtitle",children:D}),Object(k.jsxs)("div",{className:"stories__tags-carousel fade-in",children:[Object(k.jsx)("span",{className:"stories__scroll-anchor",ref:Dt}),Object(k.jsx)(g.u,{step:5,useButtons:!0,disableMouseDrag:!0,onScrollCallback:function(){return Tt({limit:10,offset:et})},sectionClass:"stories__scroll-container",prevButtonClass:"stories__prev-button",nextButtonClass:"stories__next-button",children:Y.map((function(t){return Object(k.jsx)(g.r,{name:t.name,value:t.filter,title:t.name,isActive:t.isActive,onClick:Et,sectionClass:"scrollable-container__child"},t.filter)}))})]}),K?Object(k.jsx)(g.k,{isPaginate:!0}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("img",{className:"stories__main-photo scale-in",src:"".concat(b.c,"/").concat(null===st||void 0===st?void 0:st.image),alt:Ot}),Object(k.jsx)(g.x,{title:Ot,sectionClass:"stories__pair-title fade-in"}),Object(k.jsx)(g.e,{title:pt,sectionClass:"stories__caption fade-in"}),Object(k.jsx)("p",{className:"stories__subtitle stories__subtitle_last fade-in",children:null===st||void 0===st?void 0:st.description})]}),Object(k.jsx)(o.a,{className:"markdown stories__markdown fade-in",children:null===st||void 0===st?void 0:st.uperBody}),Bt(),Object(k.jsx)(o.a,{className:"markdown stories__markdown stories__markdown_last fade-in",children:null===st||void 0===st?void 0:st.lowerBody}),Pt()]})]})}()}),Object(k.jsx)(x.h,{isOpen:lt,onClose:function(){ut(!1)},currentPhoto:jt})]});function Pt(){var t;return Object(k.jsxs)("div",{className:"stories__links fade-in",children:[M&&(null===st||void 0===st||null===(t=st.mentor)||void 0===t?void 0:t.email)&&Object(k.jsx)("a",{className:"link stories__link",href:"mailto:".concat(st.mentor.email),target:"_blank",rel:"noopener noreferrer",children:xt}),(null===st||void 0===st?void 0:st.nextArticle)&&Object(k.jsx)(g.o,{text:st.nextArticle.title,href:gt,onClick:yt,sectionClass:"stories__link_next"})]})}function Bt(){var t;return Object(k.jsx)("div",{className:"stories__photo-carousel-container",children:Object(k.jsx)("div",{className:"stories__photo-carousel-wrapper",children:Object(k.jsxs)(a.a,{ref:kt,className:"stories__photo-carousel",itemsToScroll:1,itemsToShow:3,initialActiveIndex:0,itemPadding:Nt,pagination:!1,enableMouseSwipe:!1,children:[Object(k.jsx)("div",{"aria-hidden":!0,className:"stories__carousel-image"}),null===st||void 0===st||null===(t=st.images)||void 0===t?void 0:t.map((function(t,e){return Object(k.jsx)("div",{className:"stories__carousel-image-wrap",onClick:function(){kt.current.goTo(e),At("".concat(b.c,"/").concat(t.image),t.imageCaption)},onKeyPress:function(){kt.current.goTo(e),At("".concat(b.c,"/").concat(t.image),t.imageCaption)},role:"button",tabIndex:0,children:Object(k.jsx)("img",{className:"stories__carousel-image",draggable:!1,src:"".concat(b.c,"/").concat(t.image),alt:t.imageCaption})},t.id)})),Object(k.jsx)("div",{"aria-hidden":!0,className:"stories__carousel-image"})]})})})}}}}]);
//# sourceMappingURL=20.308e4a3d.chunk.js.map