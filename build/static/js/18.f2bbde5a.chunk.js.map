{"version":3,"sources":["api/catalog-page.js","pages/CatalogArticle/locales/RU.js","pages/CatalogArticle/CatalogArticle.js"],"names":["getCatalogPageData","limit","offset","axios","get","baseURL","apiUrl","params","then","response","data","catch","err","Promise","reject","Error","message","getCatalogArticlePageData","articleId","catalogArticlePageTexts","headTitle","headDescription","stubButtonText","CatalogArticle","useParams","history","useHistory","useState","catalogArticlePageData","setCatalogArticlePageData","isLoadingPage","setIsLoadingPage","isPageError","setIsPageError","nextPageLink","nextArticle","id","useEffect","status","ERROR_CODES","notFound","push","NOT_FOUND_URL","finally","BasePage","title","description","scrollUpDeps","isPaginate","AnimatedPageContainer","titleText","ERROR_MESSAGES","generalErrorMessage","urlBack","CATALOG_URL","buttonText","staticPage","className","sectionClass","src","staticImageUrl","image","alt","imageCaption","body","text","href","renderPage"],"mappings":"uHAAA,gGAIA,SAASA,EAAT,GAAgD,IAAlBC,EAAiB,EAAjBA,MAAOC,EAAU,EAAVA,OACnC,OAAOC,IACJC,IADI,UACGC,KADH,OACaC,IADb,aACgC,CACnCC,OAAQ,CAAEN,QAAOC,YAElBM,MAAK,SAACC,GAAD,OAAcA,EAASC,QAC5BC,OAAM,SAACC,GAAD,OAASC,QAAQC,OAAO,IAAIC,MAAJ,UAAaH,EAAII,cAGpD,SAASC,IAA+C,IAAD,yDAAJ,GAAdC,EAAkB,EAAlBA,UACnC,OAAOf,IACJC,IADI,UACGC,KADH,OACaC,IADb,oBAC+BY,IACnCV,MAAK,SAACC,GAAD,OAAcA,EAASC,QAC5BC,OAAM,SAACC,GAAD,OAASC,QAAQC,OAAR,OAAeF,QAAf,IAAeA,OAAf,EAAeA,EAAKH,e,0GCXzBU,EANiB,CAC9BC,UAAW,uCACXC,gBAAiB,wFACjBC,eAAgB,yF,4DCcVF,EAA+CD,EAA/CC,UAAWC,EAAoCF,EAApCE,gBAAiBC,EAAmBH,EAAnBG,eA0FrBC,UAxFf,WAA2B,IAAD,MAChBL,EAAcM,cAAdN,UACFO,EAAUC,cAEhB,EAA4DC,qBAA5D,mBAAOC,EAAP,KAA+BC,EAA/B,KACA,EAA0CF,oBAAS,GAAnD,mBAAOG,EAAP,KAAsBC,EAAtB,KAEA,EAAsCJ,oBAAS,GAA/C,mBAAOK,EAAP,KAAoBC,EAApB,KAEMC,EAAY,0BAAeN,QAAf,IAAeA,GAAf,UAAeA,EAAwBO,mBAAvC,aAAe,EAAqCC,IAmBtE,OAjBAC,qBAAU,WACRN,GAAiB,GACbb,GACFD,YAA0B,CAAEC,cACzBV,MAAK,SAACE,GACLmB,EAA0BnB,MAE3BC,OAAM,SAACC,GACFA,EAAI0B,SAAWC,IAAYC,SAAUf,EAAQgB,KAAKC,KACjDT,GAAe,MAErBU,SAAQ,WACPZ,GAAiB,QAGtB,CAACb,IAGF,cAAC0B,EAAA,EAAD,CACExB,UAAS,iBAAEQ,QAAF,IAAEA,OAAF,EAAEA,EAAwBiB,aAA1B,QAAmCzB,EAC5CC,gBAAe,iBAAEO,QAAF,IAAEA,OAAF,EAAEA,EAAwBkB,mBAA1B,QAAyCzB,EACxD0B,aAAc,CAAC7B,GAHjB,SAKGY,EAAgB,cAAC,IAAD,CAAQkB,YAAU,IAIvC,WACE,GAAIhB,EACF,OACE,cAACiB,EAAA,EAAD,CACEC,UAAWC,IAAeC,oBAAoBP,MAC9CQ,QAASC,IACTC,WAAYjC,EACZkC,YAAU,IAIhB,OACE,sBAAKC,UAAU,gCAAf,UACE,cAAC,IAAD,CACEZ,MAAK,OAAEjB,QAAF,IAAEA,OAAF,EAAEA,EAAwBiB,MAC/Ba,aAAa,wBAEf,mBAAGD,UAAU,qCAAb,gBACG7B,QADH,IACGA,OADH,EACGA,EAAwBkB,cAE3B,yBAAQW,UAAU,kBAAlB,UACE,qBACEE,IAAG,UAAKC,IAAL,mBAAuBhC,QAAvB,IAAuBA,OAAvB,EAAuBA,EAAwBiC,OAClDC,IAAG,OAAElC,QAAF,IAAEA,OAAF,EAAEA,EAAwBiB,MAC7BY,UAAU,6BAEW,OAAtB7B,QAAsB,IAAtBA,OAAA,EAAAA,EAAwBmC,eACvB,4BAAYN,UAAU,8BAAtB,SACG7B,EAAuBmC,kBAI9B,sBAAKN,UAAU,qBAAf,UACE,cAAC,IAAD,CAAeA,UAAU,6BAAzB,gBACG7B,QADH,IACGA,OADH,EACGA,EAAwBoC,QAGJ,OAAtBpC,QAAsB,IAAtBA,OAAA,EAAAA,EAAwBO,cACvB,cAAC,IAAD,CACE8B,KAAMrC,EAAuBO,YAAYU,MACzCqB,KAAMhC,EACNwB,aAAa,qCA7CoBS","file":"static/js/18.f2bbde5a.chunk.js","sourcesContent":["import axios from 'axios';\nimport { apiUrl, baseURL } from '../config/config';\n\n// получить данные страницы каталога\nfunction getCatalogPageData({ limit, offset }) {\n  return axios\n    .get(`${baseURL}${apiUrl}/catalog/`, {\n      params: { limit, offset },\n    })\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(new Error(`${err.message}`)));\n}\n\nfunction getCatalogArticlePageData({ articleId } = {}) {\n  return axios\n    .get(`${baseURL}${apiUrl}/catalog/${articleId}`)\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(err?.response));\n}\n\nexport { getCatalogPageData, getCatalogArticlePageData };\n","const catalogArticlePageTexts = {\n  headTitle: 'Статья',\n  headDescription: 'Полезная статья',\n  stubButtonText: 'Вернуться назад',\n};\n\nexport default catalogArticlePageTexts;\n","import { useEffect, useState } from 'react';\nimport ReactMarkdown from 'react-markdown';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { getCatalogArticlePageData } from '../../api/catalog-page';\nimport catalogArticlePageTexts from './locales/RU';\nimport { ERROR_CODES, ERROR_MESSAGES } from '../../config/constants';\nimport { CATALOG_URL, NOT_FOUND_URL } from '../../config/routes';\nimport { staticImageUrl } from '../../config/config';\nimport {\n  AnimatedPageContainer,\n  BasePage,\n  Loader,\n  NextArticleLink,\n  TitleH1,\n} from './index';\nimport './CatalogArticle.scss';\n\nconst { headTitle, headDescription, stubButtonText } = catalogArticlePageTexts;\n\nfunction CatalogArticle() {\n  const { articleId } = useParams();\n  const history = useHistory();\n\n  const [catalogArticlePageData, setCatalogArticlePageData] = useState();\n  const [isLoadingPage, setIsLoadingPage] = useState(true);\n  // Стейт ошибки\n  const [isPageError, setIsPageError] = useState(false);\n\n  const nextPageLink = `/catalog/${catalogArticlePageData?.nextArticle?.id}`;\n\n  useEffect(() => {\n    setIsLoadingPage(true);\n    if (articleId) {\n      getCatalogArticlePageData({ articleId })\n        .then((data) => {\n          setCatalogArticlePageData(data);\n        })\n        .catch((err) => {\n          if (err.status === ERROR_CODES.notFound) history.push(NOT_FOUND_URL);\n          else setIsPageError(true);\n        })\n        .finally(() => {\n          setIsLoadingPage(false);\n        });\n    }\n  }, [articleId]);\n\n  return (\n    <BasePage\n      headTitle={catalogArticlePageData?.title ?? headTitle}\n      headDescription={catalogArticlePageData?.description ?? headDescription}\n      scrollUpDeps={[articleId]}\n    >\n      {isLoadingPage ? <Loader isPaginate /> : renderPage()}\n    </BasePage>\n  );\n\n  function renderPage() {\n    if (isPageError) {\n      return (\n        <AnimatedPageContainer\n          titleText={ERROR_MESSAGES.generalErrorMessage.title}\n          urlBack={CATALOG_URL}\n          buttonText={stubButtonText}\n          staticPage\n        />\n      );\n    }\n    return (\n      <div className=\"article page__section fade-in\">\n        <TitleH1\n          title={catalogArticlePageData?.title}\n          sectionClass=\"article__main-title\"\n        />\n        <p className=\"article__description section-title\">\n          {catalogArticlePageData?.description}\n        </p>\n        <figure className=\"article__figure\">\n          <img\n            src={`${staticImageUrl}/${catalogArticlePageData?.image}`}\n            alt={catalogArticlePageData?.title}\n            className=\"article__image scale-in\"\n          />\n          {catalogArticlePageData?.imageCaption && (\n            <figcaption className=\"caption article__figcaption\">\n              {catalogArticlePageData.imageCaption}\n            </figcaption>\n          )}\n        </figure>\n        <div className=\"article__container\">\n          <ReactMarkdown className=\"markdown article__markdown\">\n            {catalogArticlePageData?.body}\n          </ReactMarkdown>\n\n          {catalogArticlePageData?.nextArticle && (\n            <NextArticleLink\n              text={catalogArticlePageData.nextArticle.title}\n              href={nextPageLink}\n              sectionClass=\"article__next-article-link\"\n            />\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CatalogArticle;\n"],"sourceRoot":""}