{"version":3,"sources":["components/TagsList/TagsList.js","utils/filter-tags.js","api/video-page.js","pages/Video/locales/RU.js","pages/Video/Video.js"],"names":["TagsList","filterList","name","handleClick","classNames","sectionClass","join","trim","classNamesList","length","className","map","item","value","filter","title","isActive","onClick","defaultProps","handleCheckboxBehavior","setState","inputValue","isChecked","stateFilters","filterItem","handleRadioBehavior","selectOneTag","tagName","deselectOneTag","deselectAllTags","getVideoPageData","limit","offset","tags","resource_group","query","axios","get","baseURL","apiUrl","params","then","response","data","catch","err","Promise","reject","Error","message","getVideoPageTags","getVideo","id","videoPageTexts","headTitle","MAIN_PAGE_TITLE","VIDEO_TITLE","headDescription","resourceGroupTag","textStubNoData","PAGE_SIZE_PAGINATE","maxScreenWidth","Video","state","useLocation","openPopupVideo","useContext","PopupsContext","currentUser","CurrentUserContext","setError","ErrorsContext","openPopupError","useState","pageSize","setPageSize","pageCount","setPageCount","pageNumber","setPageNumber","mainVideo","setMainVideo","video","setVideo","categories","setCategories","isLoadingPage","setIsLoadingPage","isFiltersUsed","setIsFiltersUsed","isLoadingPaginate","setIsLoadingPaginate","isShowMainCard","setIsShowMainCard","isPageError","setIsPageError","changeCategory","ALL_CATEGORIES","getActiveTags","activeCategories","activeTags","tag","isResourceGroup","some","getVideoData","isFiltersActive","fixedPageSize","fixedOffset","results","count","Math","ceil","pinnedFullSize","ERROR_MESSAGES","filterErrorMessage","finally","getFirstPageData","all","videoData","mainCard","find","pop","categoriesArray","slug","toLowerCase","changeCaseOfFirstLetter","tagsWithoutResorceGroup","tagsWithResourseGroup","resourceGroupData","defineCategories","debounceFiltration","useDebounce","DELAY_DEBOUNCE","debouncePaginate","useEffect","res","setLocalStorageData","localStChosenVideo","predefinedParams","smallQuery","window","matchMedia","largeQuery","listener","matches","addEventListener","removeEventListener","isCentered","BasePage","AnimatedPageContainer","titleText","generalErrorMessage","isPaginate","loadingContentPagination","onChange","renderMainContent","CardVideoMain","CardFilm","isVideo"],"mappings":"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","file":"static/js/13.3acbbb40.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\nimport { PseudoButtonTag } from '../utils';\nimport './TagsList.scss';\n\nconst centeringFiltersMaxLength = 3;\n\nfunction TagsList({ filterList, name, handleClick, sectionClass }) {\n  const classNames = ['tags', sectionClass].join(' ').trim();\n  const classNamesList = [\n    'tags__list',\n    filterList.length > centeringFiltersMaxLength ? 'tags__list_mobile' : '',\n  ]\n    .join(' ')\n    .trim();\n\n  return (\n    <div className={classNames}>\n      <ul className={classNamesList}>\n        {filterList.map((item) => (\n          <li className=\"tags__list-item\" key={item?.name}>\n            <PseudoButtonTag\n              name={name}\n              value={item?.filter}\n              title={item?.name}\n              isActive={item?.isActive}\n              onClick={handleClick}\n            />\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nTagsList.propTypes = {\n  filterList: PropTypes.arrayOf(PropTypes.any),\n  sectionClass: PropTypes.string,\n  name: PropTypes.string,\n  handleClick: PropTypes.func,\n};\n\nTagsList.defaultProps = {\n  filterList: [],\n  sectionClass: '',\n  name: '',\n  handleClick: () => {},\n};\n\nexport default TagsList;\n","/* eslint-disable no-param-reassign */\nexport const handleCheckboxBehavior = (setState, { inputValue, isChecked }) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      if (filterItem.filter === inputValue) {\n        filterItem.isActive = isChecked;\n      }\n      return filterItem;\n    })\n  );\n};\n\nexport const handleRadioBehavior = (setState, { inputValue, isChecked }) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      if (filterItem.filter === inputValue) {\n        filterItem.isActive = isChecked;\n      } else {\n        filterItem.isActive = false;\n      }\n      return filterItem;\n    })\n  );\n};\n\nexport const selectOneTag = (setState, tagName) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      if (filterItem.filter === tagName) {\n        filterItem.isActive = true;\n      } else {\n        filterItem.isActive = false;\n      }\n      return filterItem;\n    })\n  );\n};\n\nexport const deselectOneTag = (setState, tagName) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      if (filterItem.filter === tagName) {\n        filterItem.isActive = false;\n      }\n      return filterItem;\n    })\n  );\n};\n\nexport const deselectAllTags = (setState) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      filterItem.isActive = false;\n      return filterItem;\n    })\n  );\n};\n","/* eslint-disable camelcase */\nimport axios from 'axios';\nimport { apiUrl, baseURL } from '../config/config';\n\n// получение/фильтрация видео на странице \"Видео\"\nfunction getVideoPageData({ limit, offset, tags, resource_group }) {\n  const query = resource_group\n    ? { limit, offset, tags, resource_group }\n    : { limit, offset, tags };\n  return axios\n    .get(`${baseURL}${apiUrl}/videos/`, {\n      params: query,\n    })\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(new Error(`${err.message}`)));\n}\n\n// получение категорий видео (список фильтров)\nfunction getVideoPageTags() {\n  return axios\n    .get(`${baseURL}${apiUrl}/videos/tags/`)\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(new Error(`${err.message}`)));\n}\n\n// получение одного видео\nfunction getVideo(id) {\n  return axios\n    .get(`${baseURL}${apiUrl}/videos/${id}`)\n    .then((response) => response.data)\n    .catch((err) => Promise.reject(new Error(`${err.message}`)));\n}\n\nexport { getVideoPageTags, getVideoPageData, getVideo };\n","import { MAIN_PAGE_TITLE, VIDEO_TITLE } from '../../../config/routes';\n\nconst videoPageTexts = {\n  headTitle: `${MAIN_PAGE_TITLE} | ${VIDEO_TITLE}`,\n  headDescription: 'Страница с видео контентом',\n  title: VIDEO_TITLE,\n  resourceGroupTag: 'Ресурсная группа',\n  textStubNoData:\n    'В данный момент страница с видео пуста. Возвращайтесь позже!',\n};\n\nexport default videoPageTexts;\n","import { useContext, useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport videoPageTexts from './locales/RU';\nimport {\n  ALL_CATEGORIES,\n  DELAY_DEBOUNCE,\n  ERROR_MESSAGES,\n  localStChosenVideo,\n} from '../../config/constants';\nimport {\n  CurrentUserContext,\n  ErrorsContext,\n  PopupsContext,\n} from '../../contexts';\nimport { useDebounce } from '../../hooks';\nimport {\n  deselectOneTag,\n  handleCheckboxBehavior,\n  selectOneTag,\n} from '../../utils/filter-tags';\nimport {\n  getVideo,\n  getVideoPageData,\n  getVideoPageTags,\n} from '../../api/video-page';\nimport { changeCaseOfFirstLetter } from '../../utils/utils';\nimport { setLocalStorageData } from '../../hooks/useLocalStorage';\nimport {\n  AnimatedPageContainer,\n  BasePage,\n  CardFilm,\n  CardVideoMain,\n  Loader,\n  Paginate,\n  TagsList,\n  TitleH1,\n} from './index';\nimport './Video.scss';\n\nconst PAGE_SIZE_PAGINATE = {\n  small: 8,\n  medium: 12,\n  big: 16,\n};\n\nconst maxScreenWidth = {\n  small: 1023,\n  medium: 1450,\n};\n\nconst { headTitle, headDescription, title, resourceGroupTag, textStubNoData } =\n  videoPageTexts;\n\nconst Video = () => {\n  // работа с открытием попапа видое при переходе из поиска\n  const { state } = useLocation();\n  const { openPopupVideo } = useContext(PopupsContext);\n\n  const { currentUser } = useContext(CurrentUserContext);\n  const { setError } = useContext(ErrorsContext);\n  const { openPopupError } = useContext(PopupsContext);\n\n  // Стейты для пагинации\n  const [pageSize, setPageSize] = useState(null);\n  const [pageCount, setPageCount] = useState(0);\n  const [pageNumber, setPageNumber] = useState(0);\n\n  // Стейты с данными\n  const [mainVideo, setMainVideo] = useState({});\n  const [video, setVideo] = useState(null);\n  const [categories, setCategories] = useState(null);\n\n  // Стейты состояний\n  const [isLoadingPage, setIsLoadingPage] = useState(true);\n  const [isFiltersUsed, setIsFiltersUsed] = useState(false);\n  const [isLoadingPaginate, setIsLoadingPaginate] = useState(false);\n  const [isShowMainCard, setIsShowMainCard] = useState(true);\n  // Стейт ошибки\n  const [isPageError, setIsPageError] = useState(false);\n\n  // Функция состояний чекбоксов фильтра\n  const changeCategory = (inputValue, isChecked) => {\n    if (inputValue === ALL_CATEGORIES) {\n      selectOneTag(setCategories, ALL_CATEGORIES);\n      setIsShowMainCard(true);\n    } else {\n      handleCheckboxBehavior(setCategories, { inputValue, isChecked });\n      deselectOneTag(setCategories, ALL_CATEGORIES);\n      setIsShowMainCard(false);\n    }\n    setIsFiltersUsed(true);\n  };\n\n  // функция, определяющая теги категорий в зависимости от того, есть ли рубрика \"Ресурсная группа\"\n  const defineCategories = (tags) => {\n    const categoriesArray = tags.map((tag) => ({\n      filter: tag?.slug.toLowerCase(),\n      name: changeCaseOfFirstLetter(tag?.name),\n      isActive: false,\n    }));\n\n    let isResourceGroup = false;\n\n    const tagsWithoutResorceGroup = [\n      { filter: ALL_CATEGORIES, name: ALL_CATEGORIES, isActive: true },\n      ...categoriesArray,\n    ];\n\n    const tagsWithResourseGroup = [\n      { filter: ALL_CATEGORIES, name: ALL_CATEGORIES, isActive: true },\n      { filter: resourceGroupTag, name: resourceGroupTag, isActive: false },\n      ...categoriesArray,\n    ];\n\n    if (currentUser) {\n      getVideoPageData({\n        resource_group: true,\n      })\n        .then((resourceGroupData) => {\n          isResourceGroup = resourceGroupData.count > 0;\n\n          if (isResourceGroup) {\n            setCategories(tagsWithResourseGroup);\n          }\n        })\n        .catch(() => setIsPageError(true));\n    }\n\n    setCategories(tagsWithoutResorceGroup);\n  };\n\n  // Сортировка значений Тэгов для АПИ\n  const getActiveTags = () => {\n    const activeCategories = categories.filter(\n      (filter) => filter.isActive && filter.filter !== ALL_CATEGORIES\n    );\n    const activeTags = activeCategories\n      .filter((tag) => tag.filter !== resourceGroupTag)\n      .map((filter) => filter.filter)\n      .join(',');\n\n    const isResourceGroup = activeCategories.some(\n      (tag) => tag.filter === resourceGroupTag\n    );\n    return { activeTags, isResourceGroup };\n  };\n\n  // Функция обработки запроса АПИ с карточками\n  const getVideoData = (params, isFiltersActive) => {\n    const offset = isFiltersUsed ? 0 : pageSize * pageNumber;\n\n    const fixedPageSize =\n      pageNumber === 0 && mainVideo && !isFiltersActive\n        ? pageSize + 1\n        : pageSize;\n\n    const fixedOffset =\n      pageNumber > 0 && mainVideo && !isFiltersActive ? offset + 1 : offset;\n\n    getVideoPageData({\n      limit: fixedPageSize,\n      offset: fixedOffset,\n      ...params,\n    })\n      .then(({ results, count }) => {\n        if (mainVideo && !isFiltersActive) {\n          setPageCount(Math.ceil((count - 1) / pageSize));\n        } else {\n          setPageCount(Math.ceil(count / pageSize));\n        }\n\n        if (pageNumber === 0 && mainVideo && !isFiltersActive) {\n          setVideo(() => results.filter((item) => !item?.pinnedFullSize));\n          setIsShowMainCard(true);\n        } else setVideo(results);\n      })\n      .catch(() => {\n        if (isFiltersUsed) {\n          setError(ERROR_MESSAGES.filterErrorMessage);\n          openPopupError();\n        } else {\n          setIsPageError(true);\n        }\n      })\n      .finally(() => {\n        setIsFiltersUsed(false);\n        setIsLoadingPaginate(false);\n      });\n  };\n\n  // Функция обработки запросов АПИ для первой загрузки страницы\n  const getFirstPageData = () => {\n    Promise.all([\n      getVideoPageTags(),\n      getVideoPageData({\n        limit: pageSize + 1,\n      }),\n    ])\n      .then(([tags, { results, count }]) => {\n        const videoData = results;\n        const mainCard = videoData.find((item) => item?.pinnedFullSize);\n        setMainVideo(mainCard);\n        if (mainCard) {\n          setVideo(() => videoData.filter((item) => !item?.pinnedFullSize));\n          setPageCount(Math.ceil((count - 1) / pageSize));\n        } else {\n          videoData.pop();\n          setVideo(videoData);\n          setPageCount(Math.ceil(count / pageSize));\n        }\n        defineCategories(tags);\n      })\n      .catch(() => setIsPageError(true))\n      .finally(() => {\n        setIsLoadingPage(false);\n      });\n  };\n\n  // Функция-фильтратор с использованием АПИ\n  const handleFiltration = () => {\n    if (categories && isFiltersUsed) {\n      const { activeTags, isResourceGroup } = getActiveTags();\n\n      if (!activeTags && !isResourceGroup) {\n        selectOneTag(setCategories, ALL_CATEGORIES);\n        getVideoData(\n          { tags: activeTags, resource_group: isResourceGroup },\n          false\n        );\n      } else\n        getVideoData(\n          { tags: activeTags, resource_group: isResourceGroup },\n          true\n        );\n    }\n  };\n\n  // Дэлеи для динамических запросов\n  const debounceFiltration = useDebounce(handleFiltration, DELAY_DEBOUNCE);\n  const debouncePaginate = useDebounce(getVideoData, DELAY_DEBOUNCE);\n  // Динамические фильтры\n  useEffect(() => {\n    if (isFiltersUsed) {\n      debounceFiltration();\n    }\n  }, [isFiltersUsed]);\n\n  // Откртие попапа при переходе из поиска\n  useEffect(() => {\n    if (state) {\n      getVideo(state.id)\n        .then((res) => {\n          setLocalStorageData(localStChosenVideo, res);\n          openPopupVideo();\n        })\n        .catch(() => setIsPageError(true));\n    }\n  }, [state]);\n\n  // Загрузка страницы, динамическая пагинация, динамический ресайз\n  useEffect(() => {\n    if (pageSize) {\n      getFirstPageData();\n    }\n  }, [pageSize, currentUser]);\n\n  useEffect(() => {\n    if (!isLoadingPage && !isFiltersUsed) {\n      setIsLoadingPaginate(true);\n      const { activeCategories, isResourceGroup } = getActiveTags();\n      const predefinedParams = {\n        tags: activeCategories,\n        resource_group: isResourceGroup,\n      };\n\n      if (activeCategories || isResourceGroup) {\n        debouncePaginate(predefinedParams, true);\n      } else debouncePaginate(predefinedParams, false);\n    }\n  }, [pageNumber]);\n\n  // Резайз пагинации\n  useEffect(() => {\n    const smallQuery = window.matchMedia(\n      `(max-width: ${maxScreenWidth.small}px)`\n    );\n    const largeQuery = window.matchMedia(\n      `(max-width: ${maxScreenWidth.medium}px)`\n    );\n\n    const listener = () => {\n      if (smallQuery.matches) {\n        setPageSize(PAGE_SIZE_PAGINATE.small);\n      } else if (largeQuery.matches) {\n        setPageSize(PAGE_SIZE_PAGINATE.medium);\n      } else {\n        setPageSize(PAGE_SIZE_PAGINATE.big);\n      }\n    };\n    listener();\n\n    smallQuery.addEventListener('change', listener);\n    largeQuery.addEventListener('change', listener);\n\n    return () => {\n      smallQuery.removeEventListener('change', listener);\n      largeQuery.removeEventListener('change', listener);\n    };\n  }, []);\n\n  // Лоадер при загрузке страницы\n  if (isLoadingPage) {\n    return <Loader isCentered />;\n  }\n\n  return (\n    <BasePage headTitle={headTitle} headDescription={headDescription}>\n      {isPageError ? (\n        <AnimatedPageContainer\n          titleText={ERROR_MESSAGES.generalErrorMessage.title}\n        />\n      ) : (\n        <>\n          <section className=\"lead page__section\">\n            <TitleH1 title={title} sectionClass=\"video__title\" />\n            {categories?.length > 0 && !isLoadingPage && renderTagsContainer()}\n          </section>\n\n          {renderMainContent()}\n        </>\n      )}\n    </BasePage>\n  );\n\n  // рендеры\n  function renderTagsContainer() {\n    return (\n      <TagsList\n        filterList={categories}\n        name=\"video\"\n        handleClick={changeCategory}\n      />\n    );\n  }\n\n  // Загрузка карточек при нажатии на пагинацию\n  function loadingContentPagination() {\n    if (isLoadingPaginate) {\n      return <Loader isPaginate />;\n    }\n\n    return (\n      <>\n        {mainVideo && isShowMainCard && !pageNumber && (\n          <section className=\"video__main-card page__section scale-in\">\n            <CardVideoMain data={mainVideo} />\n          </section>\n        )}\n\n        <section className=\"video__cards-grid page__section\">\n          {video &&\n            video.map((item) => (\n              <CardFilm\n                key={item?.id}\n                data={item}\n                sectionClass=\"scale-in\"\n                isVideo\n              />\n            ))}\n        </section>\n      </>\n    );\n  }\n\n  // Контент страницы\n  function renderMainContent() {\n    if (!video && !categories) {\n      return <AnimatedPageContainer titleText={textStubNoData} />;\n    }\n\n    return (\n      <>\n        {isFiltersUsed ? (\n          <Loader isPaginate />\n        ) : (\n          <>\n            {loadingContentPagination()}\n\n            {pageCount > 1 && (\n              <section className=\"video__cards-paginate\">\n                <Paginate\n                  sectionClass=\"cards-section__pagination \"\n                  pageCount={pageCount}\n                  value={pageNumber}\n                  onChange={setPageNumber}\n                />\n              </section>\n            )}\n          </>\n        )}\n      </>\n    );\n  }\n};\n\nexport default Video;\n"],"sourceRoot":""}