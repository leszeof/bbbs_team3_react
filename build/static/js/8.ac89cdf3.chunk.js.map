{"version":3,"sources":["components/TagsList/TagsList.js","utils/filter-tags.js","pages/Places/locales/RU.js","pages/Places/constants.js","components/PlacesRecommend/locales/RU.js","components/FormRecommendation/locales/RU.js","components/FormRecommendation/FormRecommendation.js","components/PlacesRecommend/PlacesRecommend.js","pages/Places/Places.js"],"names":["TagsList","filterList","name","handleClick","classNames","sectionClass","join","trim","classNamesList","length","className","map","item","value","filter","title","isActive","onClick","defaultProps","handleCheckboxBehavior","setState","inputValue","isChecked","stateFilters","filterItem","handleRadioBehavior","selectOneTag","tagName","deselectOneTag","deselectAllTags","placesPageTexts","headTitle","MAIN_PAGE_TITLE","PLACES_TITLE","headDescription","textStubNoData","paragraphNoContent","mentorTag","ageFilterNames","ageFilters","PAGE_SIZE_PAGINATE","texts","closeButtonlabel","recommendadionTextPart1","recommendadionButton","recommendadionTextPart2","titlePlaceholder","linkPlaceholder","addressPlaceholder","genderMale","genderFemale","agePlaceholder","activityPlaceholder","cityPlaceholder","descPlaceholder","descPlaceholderMobile","buttonText","buttonTextLoading","addPhotoBtnDefault","addPhotoBtnChange","addPhotoAdded","validationSettings","minLength","maxLength","min","max","FormRecommendation","isOpen","onSubmit","activityTypes","isWaitingResponse","useState","textAreaPlaceholder","setTextAreaPlaceholder","useEffect","tablet","window","matchMedia","listener","matches","addEventListener","removeEventListener","cities","useContext","CitiesContext","ErrorsContext","serverError","clearError","errorsString","getServerErrors","isAnimated","setIsAnimated","useFormWithValidation","values","handleChange","errors","isValid","resetForm","handleChangeFiles","setTimeout","formClassNames","evt","preventDefault","noValidate","id","type","placeholder","onChange","required","error","link","address","htmlFor","gender","age","options","inputName","activityType","isFormOpen","city","description","isTextarea","image","accept","regExpImages","color","isSmall","isSpan","isDisabled","isSubmittable","PlacesRecommend","openSuccessPopup","setError","generalErrorMessage","ERROR_MESSAGES","unauthorized","ERROR_CODES","badRequest","setIsFormOpen","setIsWaitingResponse","scrollAnchorRef","useRef","closeForm","ref","aria-label","current","scrollIntoView","behavior","data","postPlace","formData","FormData","append","createFormData","then","catch","err","status","message","finally","maxScreenWidth","Places","state","useLocation","searchPlaceId","searchedPlace","setSearchedPlace","useActivityTypes","activityTypesSimplified","currentUser","CurrentUserContext","PopupsContext","openPopupCities","openPopupError","currentAnonymousCity","useLocalStorage","localStUserCity","getLocalStorageItem","userCity","places","setPlaces","chosenPlace","setChosenPlace","isChosenOnPageOne","setIsChosenOnPageOne","isPageError","setIsPageError","isLoadingPage","setIsLoadingPage","isLoadingFilters","setIsLoadingFilters","isLoadingPaginate","setIsLoadingPaginate","isCityChanging","setIsCityChanging","isFiltersUsed","setIsFiltersUsed","isChosenCardHidden","setIsChosenCardHidden","isFirstRender","setIsFirstRender","ages","setAges","categories","setCategories","isPlacePopupOpen","setIsPlacePopupOpen","isPopupRecommendSuccessOpen","setIsPopupRecommendSuccessOpen","openPopupRecommendSuccess","pageSize","setPageSize","pageCount","setPageCount","pageNumber","setPageNumber","smallQuery","changeCategory","ALL_CATEGORIES","changeAge","definePlaces","placesData","isFiltered","mainCard","chosenCard","restOfPlaces","chosen","place","pop","defineActiveTags","activeCategories","category","activeTags","tag","activeAges","isMentorFlag","some","getFilteredPlaces","params","isFiltersActive","offset","fixedPageSize","fixedOffset","getPlaces","limit","results","count","Math","ceil","filterErrorMessage","debounceFiltration","useDebounce","age_restriction","tags","DELAY_DEBOUNCE","debouncePagination","predefinedParams","scroll","top","Promise","all","getChosenPlace","getPlacesTags","tagsData","chosenPlaceData","categoriesArray","slug","toLowerCase","changeCaseOfFirstLetter","defineCategories","DELAY_RENDER","getPlace","BasePage","AnimatedPageContainer","titleText","isPaginate","renderPlaces","renderPageContent","onClose","isCentered","text","CardPlace","isBig","i","COLORS"],"mappings":"sHACA,2BAKA,SAASA,EAAT,GAAoE,IAAhDC,EAA+C,EAA/CA,WAAYC,EAAmC,EAAnCA,KAAMC,EAA6B,EAA7BA,YAC9BC,EAAa,CAAC,OAD6C,EAAhBC,cACPC,KAAK,KAAKC,OAC9CC,EAAiB,CACrB,aACAP,EAAWQ,OANmB,EAMkB,oBAAsB,IAErEH,KAAK,KACLC,OAEH,OACE,qBAAKG,UAAWN,EAAhB,SACE,oBAAIM,UAAWF,EAAf,SACGP,EAAWU,KAAI,SAACC,GAAD,OACd,oBAAIF,UAAU,kBAAd,SACE,cAAC,IAAD,CACER,KAAMA,EACNW,MAAK,OAAED,QAAF,IAAEA,OAAF,EAAEA,EAAME,OACbC,MAAK,OAAEH,QAAF,IAAEA,OAAF,EAAEA,EAAMV,KACbc,SAAQ,OAAEJ,QAAF,IAAEA,OAAF,EAAEA,EAAMI,SAChBC,QAASd,KANb,OAAqCS,QAArC,IAAqCA,OAArC,EAAqCA,EAAMV,aAsBrDF,EAASkB,aAAe,CACtBjB,WAAY,GACZI,aAAc,GACdH,KAAM,GACNC,YAAa,cAGAH,O,iCChDf,0KACO,IAAMmB,EAAyB,SAACC,EAAD,GAA0C,IAA7BC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UAC7DF,GAAS,SAACG,GAAD,OACPA,EAAaZ,KAAI,SAACa,GAIhB,OAHIA,EAAWV,SAAWO,IACxBG,EAAWR,SAAWM,GAEjBE,SAKAC,EAAsB,SAACL,EAAD,GAA0C,IAA7BC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UAC1DF,GAAS,SAACG,GAAD,OACPA,EAAaZ,KAAI,SAACa,GAMhB,OALIA,EAAWV,SAAWO,EACxBG,EAAWR,SAAWM,EAEtBE,EAAWR,UAAW,EAEjBQ,SAKAE,EAAe,SAACN,EAAUO,GACrCP,GAAS,SAACG,GAAD,OACPA,EAAaZ,KAAI,SAACa,GAMhB,OALIA,EAAWV,SAAWa,EACxBH,EAAWR,UAAW,EAEtBQ,EAAWR,UAAW,EAEjBQ,SAKAI,EAAiB,SAACR,EAAUO,GACvCP,GAAS,SAACG,GAAD,OACPA,EAAaZ,KAAI,SAACa,GAIhB,OAHIA,EAAWV,SAAWa,IACxBH,EAAWR,UAAW,GAEjBQ,SAKAK,EAAkB,SAACT,GAC9BA,GAAS,SAACG,GAAD,OACPA,EAAaZ,KAAI,SAACa,GAEhB,OADAA,EAAWR,UAAW,EACfQ,U,iLCnCEM,EAhBS,CACtBC,UAAU,GAAD,OAAKC,IAAL,cAA0BC,KACnCC,gBAAiB,0RACjBnB,MAAOkB,IACPE,eACE,2ZACFC,mBAAoB,6LACpBC,UAAW,oGACXC,eAAgB,CACd,CAAExB,OAAQ,OAAQZ,KAAM,2BACxB,CAAEY,OAAQ,QAASZ,KAAM,4BACzB,CAAEY,OAAQ,QAASZ,KAAM,4BACzB,CAAEY,OAAQ,KAAMZ,KAAM,4BCZlBoC,EAAmBR,EAAnBQ,eAEKC,EAAa,CACxB,CACEzB,OAAQwB,EAAe,GAAGxB,OAC1BZ,KAAMoC,EAAe,GAAGpC,KACxBc,UAAU,GAEZ,CACEF,OAAQwB,EAAe,GAAGxB,OAC1BZ,KAAMoC,EAAe,GAAGpC,KACxBc,UAAU,GAEZ,CACEF,OAAQwB,EAAe,GAAGxB,OAC1BZ,KAAMoC,EAAe,GAAGpC,KACxBc,UAAU,GAEZ,CACEF,OAAQwB,EAAe,GAAGxB,OAC1BZ,KAAMoC,EAAe,GAAGpC,KACxBc,UAAU,IAIDwB,EACJ,EADIA,EAEN,G,8DCtBQC,EAPD,CACZC,iBAAkB,4EAClBC,wBAAwB,mWAAD,OAAwE,OAAxE,4EAAgG,QACvHC,qBAAqB,yDAAD,OAAc,OAAd,kCACpBC,wBAAwB,4FAAD,OAAwB,OAAxB,8ECeVJ,EAnBD,CACZK,iBAAkB,oDAClBC,gBAAiB,2BACjBC,mBAAoB,kCACpBC,WAAY,6CACZC,aAAc,6CACdC,eAAgB,8CAChBC,oBAAqB,2DACrBC,gBAAiB,kCACjBC,gBACE,uUACFC,sBAAuB,sEACvBC,WAAY,yDACZC,kBAAmB,sDACnBC,mBAAoB,4EACpBC,kBAAmB,mDACnBC,cAAe,mF,+BCLfd,EAeEL,EAfFK,iBACAC,EAcEN,EAdFM,gBACAC,EAaEP,EAbFO,mBACAC,EAYER,EAZFQ,WACAC,EAWET,EAXFS,aACAC,EAUEV,EAVFU,eACAC,EASEX,EATFW,oBACAC,EAQEZ,EARFY,gBACAC,EAOEb,EAPFa,gBACAC,EAMEd,EANFc,sBACAC,EAKEf,EALFe,WACAE,EAIEjB,EAJFiB,mBACAC,EAGElB,EAHFkB,kBACAC,EAEEnB,EAFFmB,cACAH,EACEhB,EADFgB,kBAGII,EACG,CACLC,UAAW,EACXC,UAAW,IAHTF,EAKK,CACPC,UAAW,EACXC,UAAW,IAPTF,EASC,CACHG,IAAK,EACLC,IAAK,IAOT,SAASC,EAAT,GAKI,IAJFC,EAIC,EAJDA,OACAC,EAGC,EAHDA,SACAC,EAEC,EAFDA,cACAC,EACC,EADDA,kBAEA,EAAsDC,mBAAS,IAA/D,mBAAOC,EAAP,KAA4BC,EAA5B,KAEAC,qBAAU,WACR,IAAMC,EAASC,OAAOC,WAAP,sBAXI,IAWJ,QAETC,EAAW,WACXH,EAAOI,QAASN,EAAuBlB,GACtCkB,EAAuBnB,IAM9B,OAJAwB,IAEAH,EAAOK,iBAAiB,SAAUF,GAE3B,WACLH,EAAOM,oBAAoB,SAAUH,MAEtC,IAEH,IAAQI,EAAWC,qBAAWC,KAAtBF,OACR,EAAoCC,qBAAWE,KAAvCC,EAAR,EAAQA,YAAaC,EAArB,EAAqBA,WAEfC,EAAeF,EAAcG,YAAgBH,GAAe,GAElE,EAAoCf,oBAAS,GAA7C,mBAAOmB,EAAP,KAAmBC,EAAnB,KAEA,EAOIC,cANFC,EADF,EACEA,OACAC,EAFF,EAEEA,aACAC,EAHF,EAGEA,OACAC,EAJF,EAIEA,QACAC,EALF,EAKEA,UACAC,EANF,EAMEA,kBAQFxB,qBAAU,WACJP,GACF8B,IACAE,YAAW,WACTR,GAAc,KApDC,MAuDjBA,GAAc,GAEhBJ,MACC,CAACpB,IAEJ,IAAMiC,EAAiB,CACrB,aACAjC,EAAS,oBAAsB,GAC/BuB,EAAa,sBAAwB,IAEpCpF,KAAK,KACLC,OAEH,OACE,sBACEG,UAAW0F,EACXlG,KAAK,oBACLkE,SA7BiB,SAACiC,GACpBA,EAAIC,iBACJlC,EAASyB,IA4BPU,YAAU,EAJZ,SAMGpC,GACC,qCACE,sBAAKzD,UAAU,8BAAf,UACE,cAAC,IAAD,CACE8F,GAAG,qBACHnG,aAAa,0FACboG,KAAK,OACLvG,KAAK,QACLwG,YAAa5D,EACb6D,SAAUb,EACVjF,MAAOgF,EAAO9E,MACd6F,UAAQ,EACR9C,UAAWD,EAAyBC,UACpCC,UAAWF,EAAyBE,UACpC8C,MAAK,OAAEd,QAAF,IAAEA,OAAF,EAAEA,EAAQhF,QAGjB,cAAC,IAAD,CACEyF,GAAG,oBACHnG,aAAa,uDACboG,KAAK,OACLvG,KAAK,OACLwG,YAAa3D,EACb4D,SAAUb,EACVjF,MAAOgF,EAAOiB,KACdD,MAAK,OAAEd,QAAF,IAAEA,OAAF,EAAEA,EAAQe,UAInB,cAAC,IAAD,CACEN,GAAG,uBACHnG,aAAa,yBACboG,KAAK,OACLvG,KAAK,UACLwG,YAAa1D,EACb2D,SAAUb,EACVjF,MAAOgF,EAAOkB,QACdH,UAAQ,EACR9C,UAAWD,EAA2BC,UACtCC,UAAWF,EAA2BE,UACtC8C,MAAK,OAAEd,QAAF,IAAEA,OAAF,EAAEA,EAAQgB,UAGjB,sBAAKrG,UAAU,8BAAf,UACE,wBACEA,UAAU,oBACVsG,QAAQ,wBAFV,UAIE,uBACER,GAAG,wBACH9F,UAAU,0BACV+F,KAAK,QACLvG,KAAK,SACLyG,SAAUb,EACVjF,MAAM,OACN+F,UAAQ,IAEV,sBACElG,UAAS,oCACD,OAANqF,QAAM,IAANA,OAAA,EAAAA,EAAQkB,QAAS,iCAAmC,IAFxD,SAKGhE,OAGL,wBACEvC,UAAU,oBACVsG,QAAQ,yBAFV,UAIE,uBACER,GAAG,yBACH9F,UAAU,0BACV+F,KAAK,QACLvG,KAAK,SACLyG,SAAUb,EACVjF,MAAM,SACN+F,UAAQ,IAEV,sBACElG,UAAS,oCACD,OAANqF,QAAM,IAANA,OAAA,EAAAA,EAAQkB,QAAS,iCAAmC,IAFxD,SAKG/D,OAIL,cAAC,IAAD,CACEsD,GAAG,mBACHnG,aAAa,uDACboG,KAAK,SACLvG,KAAK,MACLwG,YAAavD,EACbwD,SAAUb,EACVjF,MAAOgF,EAAOqB,IACdN,UAAQ,EACR3C,IAAKJ,EAAuBI,IAC5BD,IAAKH,EAAuBG,IAC5B6C,MAAK,OAAEd,QAAF,IAAEA,OAAF,EAAEA,EAAQmB,SAInB,cAAC,IAAD,CACER,YAAatD,EACb+D,QAAS9C,EACT+C,UAAU,eACVT,SAAUb,EACVe,MAAK,OAAEd,QAAF,IAAEA,OAAF,EAAEA,EAAQsB,aACfC,WAAYnD,IAGd,cAAC,IAAD,CACEuC,YAAarD,EACb8D,QAASjC,EACTkC,UAAU,OACVT,SAAUb,EACVe,MAAK,OAAEd,QAAF,IAAEA,OAAF,EAAEA,EAAQwB,KACfD,WAAYnD,IAGd,cAAC,IAAD,CACEqC,GAAG,2BACHnG,aAAa,+CACboG,KAAK,OACLvG,KAAK,cACLwG,YAAalC,EACbmC,SAAUb,EACVjF,MAAOgF,EAAO2B,YACdZ,UAAQ,EACRC,MAAK,OAAEd,QAAF,IAAEA,OAAF,EAAEA,EAAQyB,YACfC,YAAU,IAGZ,sBAAM/G,UAAU,qBAAhB,SAAsC8E,IAEtC,sBAAK9E,UAAU,0BAAf,UACE,sBAAKA,UAAU,wBAAf,WACS,OAANqF,QAAM,IAANA,OAAA,EAAAA,EAAQ2B,QACP,sBAAMhH,UAAU,8BAAhB,gBACGqF,QADH,IACGA,OADH,EACGA,EAAQ2B,QAGb,sBAAKhH,UAAU,kCAAf,WACS,OAANmF,QAAM,IAANA,OAAA,EAAAA,EAAQ6B,QACP,sBAAMhH,UAAU,6DAAhB,SACGkD,IAGL,wBACElD,UAAU,8BACVsG,QAAQ,uBAFV,UAIE,uBACER,GAAG,uBACHC,KAAK,OACLvG,KAAK,QACLyH,OAAO,wBACPjH,UAAU,0BACViG,SAAU,SAACN,GAAD,OAASH,EAAkBG,EAAKuB,MAC1ChB,UAAQ,MAET,OAACf,QAAD,IAACA,OAAD,EAACA,EAAQ6B,QACR,cAAC,IAAD,CACErH,aAAY,qCACJ,OAAN0F,QAAM,IAANA,OAAA,EAAAA,EAAQ2B,OAAQ,kCAAoC,IAEtDG,MAAK,WAAW,OAAN9B,QAAM,IAANA,OAAA,EAAAA,EAAQ2B,OAAQ,QAAU,aACpCI,SAAO,EACPC,QAAM,IAGV,sBACErH,UAAS,sCACD,OAANqF,QAAM,IAANA,OAAA,EAAAA,EAAQ2B,OAAQ,mCAAqC,IAFzD,UAKS,OAAN7B,QAAM,IAANA,OAAA,EAAAA,EAAQ6B,OAAQ/D,EAAoBD,aAM7C,cAAC,IAAD,CACE3C,MAAOuD,EAAoBb,EAAoBD,EAC/CqE,MAAM,OACNG,WAAY1D,IAAsB0B,EAClCiC,eAAa,YAgB3B/D,EAAmBhD,aAAe,CAChCmD,cAAe,GACfF,QAAQ,EACRC,SAAU,aACVE,mBAAmB,GAGNJ,Q,OC9Tf,SAASgE,EAAT,GAA6E,IAAlD7H,EAAiD,EAAjDA,aAAcgE,EAAmC,EAAnCA,cAAe8D,EAAoB,EAApBA,iBAC9CC,EAAajD,qBAAWE,KAAxB+C,SACAC,EAAwBC,IAAxBD,oBACAE,EAA6BC,IAA7BD,aAAcE,EAAeD,IAAfC,WAEtB,EAAoClE,oBAAS,GAA7C,mBAAO+C,EAAP,KAAmBoB,EAAnB,KACA,EAAkDnE,oBAAS,GAA3D,mBAAOD,EAAP,KAA0BqE,EAA1B,KAEMC,EAAkBC,iBAAO,MAKzBC,EAAY,WAChBJ,GAAc,IAwCVtI,EAAa,CACjB,iBACA,4BACA,UACAC,GAECC,KAAK,KACLC,OAEH,OACE,mCACE,yBAASG,UAAWN,EAAY2I,IAAKH,EAArC,SACE,sBAAKlI,UAAU,4BAAf,UACG4G,GACC,wBACE5G,UAAU,+BACV+F,KAAK,SACLuC,aAAYvG,EAAMC,iBAClBzB,QAAS6H,IAGb,oBAAGpI,UAAU,qCAAb,UACG+B,EAAME,wBACP,wBACEjC,UAAU,4BACV+F,KAAK,SACLxF,QA/DK,WACfyH,GAAc,GARdE,EAAgBK,QAAQC,eAAe,CAAEC,SAAU,YAmE3C,SAKG1G,EAAMG,uBAERH,EAAMI,2BAET,cAAC,EAAD,CACEsB,OAAQmD,EACRlD,SApDe,SAACgF,GACxBT,GAAqB,GACrBU,YAhBqB,SAACD,GACtB,IAAME,EAAW,IAAIC,SAUrB,OATIH,EAAKtC,MAAMwC,EAASE,OAAO,OAAQJ,EAAKtC,MAC5CwC,EAASE,OAAO,QAASJ,EAAK1B,OAC9B4B,EAASE,OAAO,QAASJ,EAAKrI,OAC9BuI,EAASE,OAAO,cAAeJ,EAAK5B,aACpC8B,EAASE,OAAO,UAAWJ,EAAKrC,SAChCuC,EAASE,OAAO,SAAUJ,EAAKnC,QAC/BqC,EAASE,OAAO,MAAOJ,EAAKlC,KAC5BoC,EAASE,OAAO,OAAQJ,EAAK7B,MAC7B+B,EAASE,OAAO,eAAgBJ,EAAK/B,cAC9BiC,EAKGG,CAAeL,IACtBM,MAAK,WACJvB,IACAW,OAEDa,OAAM,SAACC,IACC,OAAHA,QAAG,IAAHA,OAAA,EAAAA,EAAKC,UAAWpB,IAAiB,OAAHmB,QAAG,IAAHA,OAAA,EAAAA,EAAKC,UAAWtB,EAChDH,EAAQ,OAACwB,QAAD,IAACA,OAAD,EAACA,EAAKR,MAEdhB,EAAS,CACP0B,QAASzB,EAAoBtH,WAGlCgJ,SAAQ,kBAAMpB,GAAqB,OAsC9BtE,cAAeA,EACfC,kBAAmBA,WAc/B4D,EAAgBhH,aAAe,CAC7BmD,cAAe,GACfhE,aAAc,GACd8H,iBAAkB,cAGLD,Q,yBCxEbnG,G,OAMED,EANFC,WACAG,EAKEJ,EALFI,gBACAnB,GAIEe,EAJFf,MACAoB,GAGEL,EAHFK,eACAC,GAEEN,EAFFM,mBACAC,GACEP,EADFO,UAGI2H,GACG,KAyfMC,UAtff,WAAmB,IAAD,EACRC,EAAUC,cAAVD,MACFE,EAAa,OAAGF,QAAH,IAAGA,OAAH,EAAGA,EAAO1D,GAC7B,EAA0CjC,mBAAS,IAAnD,mBAAO8F,EAAP,KAAsBC,EAAtB,KAEA,EAAmDC,cAA3ClG,EAAR,EAAQA,cAAemG,EAAvB,EAAuBA,wBAEfC,EAAgBtF,qBAAWuF,KAA3BD,YACR,EAA4CtF,qBAAWwF,KAA/CC,EAAR,EAAQA,gBAAiBC,EAAzB,EAAyBA,eACjBzC,EAAajD,qBAAWE,KAAxB+C,SAKF0C,EAHsBC,YAAgBC,IAGfC,GACvBC,EAAQ,iBAAGT,QAAH,IAAGA,OAAH,EAAGA,EAAalD,YAAhB,QAAwBuD,EAGtC,EAA4BvG,mBAAS,MAArC,mBAAO4G,EAAP,KAAeC,EAAf,KACA,EAAsC7G,mBAAS,MAA/C,mBAAO8G,EAAP,KAAoBC,EAApB,KACA,EAAkD/G,oBAAS,GAA3D,mBAAOgH,EAAP,KAA0BC,EAA1B,KACA,EAAsCjH,oBAAS,GAA/C,oBAAOkH,GAAP,MAAoBC,GAApB,MAEA,GAA0CnH,oBAAS,GAAnD,qBAAOoH,GAAP,MAAsBC,GAAtB,MAEA,GAAgDrH,oBAAS,GAAzD,qBAAOsH,GAAP,MAAyBC,GAAzB,MAEA,GAAkDvH,oBAAS,GAA3D,qBAAOwH,GAAP,MAA0BC,GAA1B,MAEA,GAA4CzH,oBAAS,GAArD,qBAAO0H,GAAP,MAAuBC,GAAvB,MAEA,GAA0C3H,oBAAS,GAAnD,qBAAO4H,GAAP,MAAsBC,GAAtB,MAEA,GAAoD7H,oBAAS,GAA7D,qBAAO8H,GAAP,MAA2BC,GAA3B,MAEA,GAA0C/H,oBAAS,GAAnD,qBAAOgI,GAAP,MAAsBC,GAAtB,MAEA,GAAwBjI,mBAAShC,GAAjC,qBAAOkK,GAAP,MAAaC,GAAb,MACA,GAAoCnI,mBAAS,IAA7C,qBAAOoI,GAAP,MAAmBC,GAAnB,MAGA,GAAgDrI,oBAAS,GAAzD,qBAAOsI,GAAP,MAAyBC,GAAzB,MACA,GACEvI,oBAAS,GADX,qBAAOwI,GAAP,MAAoCC,GAApC,MAWMC,GAA4B,WAChCD,IAA+B,IAQjC,GAAgCzI,mBAAS,MAAzC,qBAAO2I,GAAP,MAAiBC,GAAjB,MACA,GAAkC5I,mBAAS,GAA3C,qBAAO6I,GAAP,MAAkBC,GAAlB,MACA,GAAoC9I,mBAAS,GAA7C,qBAAO+I,GAAP,MAAmBC,GAAnB,MAGA7I,qBAAU,WACR,IAAM8I,EAAa5I,OAAOC,WAAP,sBACFmF,GADE,QAIblF,EAAW,WACX0I,EAAWzI,QACboI,GAAY3K,GAEZ2K,GAAY3K,IAOhB,OAJAsC,IAEA0I,EAAWxI,iBAAiB,SAAUF,GAE/B,WACL0I,EAAWvI,oBAAoB,SAAUH,MAE1C,IAGH,IAAM2I,GAAiB,SAACpM,EAAYC,GAC9BD,IAAeqM,KACjBhM,YAAakL,GAAec,KAC5B7L,YAAgB6K,MAEhBvL,YAAuByL,GAAe,CAAEvL,aAAYC,cACpDM,YAAegL,GAAec,MAEhCtB,IAAiB,IAIbuB,GAAY,SAACtM,EAAYC,GAC7BH,YAAuBuL,GAAS,CAAErL,aAAYC,cAC9C8K,IAAiB,IAwBbwB,GAAe,SAACC,EAAYC,EAAYC,GAC5C,IAAMC,EAAaD,GAAY1C,EAC3B4C,EAAeJ,EAgBnB,OAbmB,IAAfP,IAAqBQ,KACT,OAAVE,QAAU,IAAVA,OAAA,EAAAA,EAAYE,UAAWJ,KACzBG,EAAeA,EAAanN,QAC1B,SAACqN,GAAD,OAAgB,OAALA,QAAK,IAALA,OAAA,EAAAA,EAAO3H,OAAP,OAAcwH,QAAd,IAAcA,OAAd,EAAcA,EAAYxH,QAEtB/F,SAAWoN,EAAWpN,OACrC+K,GAAqB,GAChByC,EAAaG,OAElBH,EAAaxN,SAAWoN,EAAWpN,QACrCwN,EAAaG,OAGV,CAAEH,iBAGLI,GAAmB,WACvB,IAAMC,EAAmB3B,GAAW7L,QAClC,SAACyN,GAAD,OAAcA,EAASvN,UAAYuN,EAASzN,SAAW4M,OAGnDc,EAAaF,EAChBxN,QAAO,SAAC2N,GAAD,OAASA,EAAI3N,SAAWuB,MAC/B1B,KAAI,SAAC8N,GAAD,OAASA,EAAI3N,UACjBR,KAAK,KAEFoO,EAAajC,GAChB3L,QAAO,SAACoG,GAAD,OAASA,EAAIlG,YACpBL,KAAI,SAACuG,GAAD,OAASA,EAAIpG,UACjBR,KAAK,KAEFqO,EAAeL,EAAiBM,MACpC,SAACH,GAAD,OAASA,EAAI3N,SAAWuB,MAG1B,MAAO,CACLiM,mBACAE,aACAE,aACAC,iBAKEE,GAAoB,SAACC,EAAQC,GACjC,IAAMC,EAAS7C,GAAgB,EAAIe,GAAWI,GAExC2B,EACW,IAAf3B,IAAqByB,EAAiC7B,GAAfA,GAAW,EAE9CgC,EACJ5B,GAAa,GAAKjC,GAAeE,IAAsBwD,EACnDC,EAAS,EACTA,EAENG,YAAU,aAAEC,MAAOH,EAAeD,OAAQE,GAAgBJ,IACvDpF,MAAK,YAAyB,IAAtB2F,EAAqB,EAArBA,QAASC,EAAY,EAAZA,MAEdjC,GADEhC,IAAgB0D,EACLQ,KAAKC,MAAMF,EAAQ,GAAKpC,IAExBqC,KAAKC,KAAKF,EAAQpC,KAGjC,IAAQe,EAAiBL,GAAayB,EAASN,GAAvCd,cAEJX,GAAa,GAAKyB,IACpBzC,IAAsB,GAGxBlB,EAAU6C,MAEXtE,OAAM,WACDwC,IACF/D,EAASE,IAAemH,oBACxB5E,KAEAa,IAAe,MAGlB3B,SAAQ,WACP+B,IAAoB,GACpBE,IAAqB,GACrBI,IAAiB,OAmDjBsD,GAAqBC,aA9CF,WACvBnD,IAAiB,GAEjB,MACE6B,KADMC,EAAR,EAAQA,iBAAkBE,EAA1B,EAA0BA,WAAYE,EAAtC,EAAsCA,WAAYC,EAAlD,EAAkDA,aAIlD,GAAgC,IAA5BL,EAAiB7N,OAsBnB,OArB0B,IAAtBiO,EAAWjO,QAEboO,GACE,CACEtH,KAAM2D,IAER,GAEFoB,IAAsB,IAGtBuC,GACE,CACEe,gBAAiBlB,EACjBnH,KAAM2D,IAER,QAIJxJ,YAAakL,GAAec,KAK1BY,EAAiB7N,OAAS,GAC5BoO,GACE,CACEX,OAAQS,EACRkB,KAAMrB,EACNoB,gBAAiBlB,EACjBnH,KAAM2D,IAER,KAKmD4E,KACnDC,GAAqBJ,YAAYd,GAAmBiB,KA2F1D,OAzFApL,qBAAU,YACHiH,IAAiBQ,KACpBL,IAAoB,GACpB4D,MAEF9D,IAAiB,KAChB,CAACO,GAAemB,KAGnB5I,qBAAU,WACR,IAAKiH,KAAkBQ,GAAe,CACpC,MAAiDkC,KAAzCG,EAAR,EAAQA,WAAYE,EAApB,EAAoBA,WAAYC,EAAhC,EAAgCA,aAE1BqB,EAAmB,CACvB9B,OAAQS,EACRkB,KAAMrB,EACNoB,gBAAiBlB,EACjBnH,KAAM2D,GAGHsD,GAAeE,GAAeC,EAIjCoB,GAAmBC,GAAkB,IAHlB,IAAf1C,IAAkBhB,IAAsB,GAC5CyD,GAAmBC,GAAkB,IAKvChE,IAAqB,MAEtB,CAACsB,KAGJ5I,qBAAU,WACJwG,GAAYgC,KACdtI,OAAOqL,OAAO,CAAEC,IAAK,IACrB1D,IAAiB,GACjBN,IAAkB,GAClBI,IAAsB,GACtBhB,EAAe,MACfF,EAAU,MACVvJ,YAAgB6K,IAEhByD,QAAQC,IAAI,CACVC,YAAe,CAAE9I,KAAM2D,IACvBiE,YAAU,CACR5H,KAAM2D,EACNkE,MAAOlC,GAAW,IAEpBoD,gBAEC5G,MAAK,YAA+C,IAAD,mBAA5CqE,EAA4C,YAAhCsB,EAAgC,EAAhCA,QAASC,EAAuB,EAAvBA,MAASiB,EAAc,MAClD,OAAIxC,QAAJ,IAAIA,OAAJ,EAAIA,EAAUG,SACZ5C,EAAeyC,GAIjB,IAAQE,EAAiBL,GAAayB,GAAS,EAAOtB,GAA9CE,aACR7C,EAAU6C,IAEV,OAAIF,QAAJ,IAAIA,OAAJ,EAAIA,EAAUG,QACZb,GAAakC,KAAKC,MAAMF,EAAQ,GAAKpC,KAErCG,GAAakC,KAAKC,KAAKF,EAAQpC,KAGjCN,GAlOiB,SAACiD,EAAMW,GAC9B,IAAMC,EAAkBZ,EAAKlP,KAAI,SAAC8N,GAAD,MAAU,CACzC3N,OAAM,OAAE2N,QAAF,IAAEA,OAAF,EAAEA,EAAKiC,KAAKC,cAClBzQ,KAAM0Q,YAAuB,OAACnC,QAAD,IAACA,OAAD,EAACA,EAAKvO,MACnCc,UAAU,MAEZ,OAAIwP,EACI,CACJ,CAAE1P,OAAQ4M,IAAgBxN,KAAMwN,IAAgB1M,UAAU,GAC1D,CAAEF,OAAQuB,GAAWnC,KAAMmC,GAAWrB,UAAU,IAFlD,mBAGKyP,IAGD,CACJ,CAAE3P,OAAQ4M,IAAgBxN,KAAMwN,IAAgB1M,UAAU,IAD5D,mBAEKyP,IAmNeI,CAAiBN,EAAD,OAAWxC,QAAX,IAAWA,OAAX,EAAWA,EAAUG,YAEpDvE,OAAM,kBAAM+B,IAAe,MAC3B3B,SAAQ,kBAAMmC,IAAkB,SAEpC,CAAChB,EAAUgC,KAEdxI,qBAAU,WACHwG,GACH/E,YAAW,WACTyE,MACCkG,KAGD5G,GAASgB,GACX6F,YAAS3G,GACNV,MAAK,SAACyE,GACL7D,EAAiB6D,GAhTvBrB,IAAoB,MAmTfnD,OAAM,kBAAM+B,IAAe,QAE/B,CAACxB,IAECiB,EAKH,qCACE,cAAC6F,EAAA,EAAD,CAAUjP,UAAWA,EAAWG,gBAAiBA,EAAjD,SACE,yBAASxB,UAAU,+BAAnB,SA8FN,WACE,GAAI+K,GACF,OACE,cAACwF,EAAA,EAAD,CACEC,UAAW5I,IAAeD,oBAAoBtH,QAIpD,GAAIwL,KAAkBlB,GAAkC,KAAb,OAANF,QAAM,IAANA,OAAA,EAAAA,EAAQ1K,QAC3C,OAnFA,mCACIwL,GAMA,cAAC,IAAD,CAAQkF,YAAU,IALlB,qCACE,cAACF,EAAA,EAAD,CAAuBC,UAAW/O,KACjCsI,GAAe,cAAC,EAAD,CAAiBpG,cAAeA,SAiFxD,OACE,qCACE,cAAC,IAAD,CAAStD,MAAOA,GAAOV,aAAa,kBAClC4L,GAuBA,cAAC,IAAD,CAAQkF,YAAU,IAtBlB,qCACE,cAACnR,EAAA,EAAD,CACEC,WAAY0M,GACZzM,KAAK,aACLC,YAAasN,KAEf,cAACzN,EAAA,EAAD,CACEC,WAAYwM,GACZvM,KAAK,OACLC,YAAawN,GACbtN,aAAa,iBAEdoK,GACC,cAAC,EAAD,CACEpG,cAAeA,EACf8D,iBAAkB8E,KAIpBpB,GAAoC,cAAC,IAAD,CAAQsF,YAAU,IAAnCC,WA/HtBC,OAGL,cAAC,IAAD,CACElN,OAAQ0I,GACRyE,QAjUkB,WACtBxE,IAAoB,IAiUhBqB,MAAO9D,EACPG,wBAAyBA,IAE3B,cAAC,IAAD,CACErG,OAAQ4I,GACRuE,QA/T6B,WACjCtE,IAA+B,SA4SxB,cAAC,IAAD,CAAQuE,YAAU,IAqD3B,SAASH,KACP,OAAI/E,IAAyC,KAAb,OAANlB,QAAM,IAANA,OAAA,EAAAA,EAAQ1K,QAE9B,cAAC,IAAD,CACE+Q,KAAMpP,GACN/B,aAAa,6BAKfgL,IAAqB,OAANF,QAAM,IAANA,OAAA,EAAAA,EAAQ1K,QAAS,EAEhC,qCACG4K,IAAgBgB,KAAuBN,IACtC,yBAASrL,UAAU,eAAnB,SACE,cAAC+Q,EAAA,EAAD,CAEErI,KAAMiC,EACNb,wBAAyBA,EACzBnK,aAAa,4CACbqR,OAAK,GALP,OACOrG,QADP,IACOA,OADP,EACOA,EAAa7E,MAStBuF,GAaA,cAAC,IAAD,CAAQoF,YAAU,IAZlB,yBAASzQ,UAAU,qBAAnB,SACGyK,EAAOxK,KAAI,SAACwN,EAAOwD,GAAR,OACV,cAACF,EAAA,EAAD,CAEErI,KAAM+E,EACN3D,wBAAyBA,EACzB3C,MAAO+J,KAAQD,EAAI,GAAKC,IAAOnR,QAC/BJ,aAAa,wCALf,OACO8N,QADP,IACOA,OADP,EACOA,EAAO3H,SA1CtB4G,GAAY,EAEZ,cAAC,IAAD,CACE/M,aAAa,4BACb+M,UAAWA,GACXvM,MAAOyM,GACP3G,SAAU4G,KAIT,QA+CA","file":"static/js/8.ac89cdf3.chunk.js","sourcesContent":["import PropTypes from 'prop-types';\nimport { PseudoButtonTag } from '../utils';\nimport './TagsList.scss';\n\nconst centeringFiltersMaxLength = 3;\n\nfunction TagsList({ filterList, name, handleClick, sectionClass }) {\n  const classNames = ['tags', sectionClass].join(' ').trim();\n  const classNamesList = [\n    'tags__list',\n    filterList.length > centeringFiltersMaxLength ? 'tags__list_mobile' : '',\n  ]\n    .join(' ')\n    .trim();\n\n  return (\n    <div className={classNames}>\n      <ul className={classNamesList}>\n        {filterList.map((item) => (\n          <li className=\"tags__list-item\" key={item?.name}>\n            <PseudoButtonTag\n              name={name}\n              value={item?.filter}\n              title={item?.name}\n              isActive={item?.isActive}\n              onClick={handleClick}\n            />\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nTagsList.propTypes = {\n  filterList: PropTypes.arrayOf(PropTypes.any),\n  sectionClass: PropTypes.string,\n  name: PropTypes.string,\n  handleClick: PropTypes.func,\n};\n\nTagsList.defaultProps = {\n  filterList: [],\n  sectionClass: '',\n  name: '',\n  handleClick: () => {},\n};\n\nexport default TagsList;\n","/* eslint-disable no-param-reassign */\nexport const handleCheckboxBehavior = (setState, { inputValue, isChecked }) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      if (filterItem.filter === inputValue) {\n        filterItem.isActive = isChecked;\n      }\n      return filterItem;\n    })\n  );\n};\n\nexport const handleRadioBehavior = (setState, { inputValue, isChecked }) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      if (filterItem.filter === inputValue) {\n        filterItem.isActive = isChecked;\n      } else {\n        filterItem.isActive = false;\n      }\n      return filterItem;\n    })\n  );\n};\n\nexport const selectOneTag = (setState, tagName) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      if (filterItem.filter === tagName) {\n        filterItem.isActive = true;\n      } else {\n        filterItem.isActive = false;\n      }\n      return filterItem;\n    })\n  );\n};\n\nexport const deselectOneTag = (setState, tagName) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      if (filterItem.filter === tagName) {\n        filterItem.isActive = false;\n      }\n      return filterItem;\n    })\n  );\n};\n\nexport const deselectAllTags = (setState) => {\n  setState((stateFilters) =>\n    stateFilters.map((filterItem) => {\n      filterItem.isActive = false;\n      return filterItem;\n    })\n  );\n};\n","import { MAIN_PAGE_TITLE, PLACES_TITLE } from '../../../config/routes';\n\nconst placesPageTexts = {\n  headTitle: `${MAIN_PAGE_TITLE} | ${PLACES_TITLE}`,\n  headDescription: 'Куда вы можете пойти, что рекомендуют наши наставники.',\n  title: PLACES_TITLE,\n  textStubNoData:\n    'Рекомендуемых мест для выбранного города ещё нет, но они обязательно появятся!',\n  paragraphNoContent: 'По вашему запросу ничего не нашлось.',\n  mentorTag: 'Выбор наставников',\n  ageFilterNames: [\n    { filter: '8-10', name: '8-10 лет' },\n    { filter: '11-13', name: '11-13 лет' },\n    { filter: '14-17', name: '14-17 лет' },\n    { filter: '18', name: '18+ лет' },\n  ],\n};\n\nexport default placesPageTexts;\n","import placesPageTexts from './locales/RU';\n\nconst { ageFilterNames } = placesPageTexts;\n\nexport const ageFilters = [\n  {\n    filter: ageFilterNames[0].filter,\n    name: ageFilterNames[0].name,\n    isActive: false,\n  },\n  {\n    filter: ageFilterNames[1].filter,\n    name: ageFilterNames[1].name,\n    isActive: false,\n  },\n  {\n    filter: ageFilterNames[2].filter,\n    name: ageFilterNames[2].name,\n    isActive: false,\n  },\n  {\n    filter: ageFilterNames[3].filter,\n    name: ageFilterNames[3].name,\n    isActive: false,\n  },\n];\n\nexport const PAGE_SIZE_PAGINATE = {\n  small: 8,\n  big: 12,\n};\n","const texts = {\n  closeButtonlabel: 'Закрыть форму',\n  recommendadionTextPart1: `Если вы были в интересном месте и хотите порекомендовать его другим${'\\u00A0'}наставникам –${'\\u00A0'}`,\n  recommendadionButton: `заполните${'\\u00A0'}форму`,\n  recommendadionTextPart2: `, и мы добавим вашу${'\\u00A0'}рекомендацию.`,\n};\n\nexport default texts;\n","const texts = {\n  titlePlaceholder: 'Название*',\n  linkPlaceholder: 'Сайт',\n  addressPlaceholder: 'Адрес*',\n  genderMale: 'Мальчик',\n  genderFemale: 'Девочка',\n  agePlaceholder: 'Возраст*',\n  activityPlaceholder: 'Тип отдыха*',\n  cityPlaceholder: 'Город*',\n  descPlaceholder:\n    'Комментарий* Поделитесь впечатлениями о проведенном времени',\n  descPlaceholderMobile: 'Комментарий*',\n  buttonText: 'Отправить',\n  buttonTextLoading: 'Отправка...',\n  addPhotoBtnDefault: 'Добавить фото',\n  addPhotoBtnChange: 'Изменить',\n  addPhotoAdded: 'Фото добавлено',\n};\n\nexport default texts;\n","import { useContext, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport texts from './locales/RU';\nimport { CitiesContext, ErrorsContext } from '../../contexts';\nimport { regExpImages } from '../../config/constants';\nimport { useFormWithValidation } from '../../hooks';\nimport getServerErrors from '../../utils/form-errors';\nimport { Button, ButtonRound, DropDownSelect, Input } from '../utils';\nimport './FormRecommendation.scss';\n\nconst {\n  titlePlaceholder,\n  linkPlaceholder,\n  addressPlaceholder,\n  genderMale,\n  genderFemale,\n  agePlaceholder,\n  activityPlaceholder,\n  cityPlaceholder,\n  descPlaceholder,\n  descPlaceholderMobile,\n  buttonText,\n  addPhotoBtnDefault,\n  addPhotoBtnChange,\n  addPhotoAdded,\n  buttonTextLoading,\n} = texts;\n\nconst validationSettings = {\n  title: {\n    minLength: 5,\n    maxLength: 50,\n  },\n  address: {\n    minLength: 5,\n    maxLength: 50,\n  },\n  age: {\n    min: 8,\n    max: 25,\n  },\n};\n\nconst animationDelay = 600;\nconst maxTabletWidth = 900;\n\nfunction FormRecommendation({\n  isOpen,\n  onSubmit,\n  activityTypes,\n  isWaitingResponse,\n}) {\n  const [textAreaPlaceholder, setTextAreaPlaceholder] = useState('');\n\n  useEffect(() => {\n    const tablet = window.matchMedia(`(max-width: ${maxTabletWidth}px)`);\n\n    const listener = () => {\n      if (tablet.matches) setTextAreaPlaceholder(descPlaceholderMobile);\n      else setTextAreaPlaceholder(descPlaceholder);\n    };\n    listener();\n\n    tablet.addEventListener('change', listener);\n\n    return () => {\n      tablet.removeEventListener('change', listener);\n    };\n  }, []);\n\n  const { cities } = useContext(CitiesContext);\n  const { serverError, clearError } = useContext(ErrorsContext);\n\n  const errorsString = serverError ? getServerErrors(serverError) : '';\n\n  const [isAnimated, setIsAnimated] = useState(false);\n\n  const {\n    values,\n    handleChange,\n    errors,\n    isValid,\n    resetForm,\n    handleChangeFiles,\n  } = useFormWithValidation();\n\n  const handleSubmit = (evt) => {\n    evt.preventDefault();\n    onSubmit(values);\n  };\n\n  useEffect(() => {\n    if (isOpen) {\n      resetForm();\n      setTimeout(() => {\n        setIsAnimated(true);\n      }, animationDelay);\n    } else {\n      setIsAnimated(false);\n    }\n    clearError();\n  }, [isOpen]);\n\n  const formClassNames = [\n    'form-recom',\n    isOpen ? 'form-recom_opened' : '',\n    isAnimated ? 'form-recom_animated' : '',\n  ]\n    .join(' ')\n    .trim();\n\n  return (\n    <form\n      className={formClassNames}\n      name=\"formRecomendation\"\n      onSubmit={handleSubmit}\n      noValidate\n    >\n      {isOpen && (\n        <>\n          <div className=\"form-recom__input-container\">\n            <Input\n              id=\"formRecommendTitle\"\n              sectionClass=\"form-recom__input-wrap form-recom__input-wrap_medium form-recom__input-wrap_indentation\"\n              type=\"text\"\n              name=\"title\"\n              placeholder={titlePlaceholder}\n              onChange={handleChange}\n              value={values.title}\n              required\n              minLength={validationSettings.title.minLength}\n              maxLength={validationSettings.title.maxLength}\n              error={errors?.title}\n            />\n\n            <Input\n              id=\"formRecommendLink\"\n              sectionClass=\"form-recom__input-wrap form-recom__input-wrap_medium\"\n              type=\"text\"\n              name=\"link\"\n              placeholder={linkPlaceholder}\n              onChange={handleChange}\n              value={values.link}\n              error={errors?.link}\n            />\n          </div>\n\n          <Input\n            id=\"formRecommendAddress\"\n            sectionClass=\"form-recom__input-wrap\"\n            type=\"text\"\n            name=\"address\"\n            placeholder={addressPlaceholder}\n            onChange={handleChange}\n            value={values.address}\n            required\n            minLength={validationSettings.address.minLength}\n            maxLength={validationSettings.address.maxLength}\n            error={errors?.address}\n          />\n\n          <div className=\"form-recom__input-container\">\n            <label\n              className=\"form-recom__label\"\n              htmlFor=\"formRecommendationBoy\"\n            >\n              <input\n                id=\"formRecommendationBoy\"\n                className=\"form-recom__input-radio\"\n                type=\"radio\"\n                name=\"gender\"\n                onChange={handleChange}\n                value=\"male\"\n                required\n              />\n              <span\n                className={`form-recom__pseudo-radio ${\n                  errors?.gender ? 'form-recom__pseudo-radio_error' : ''\n                }`}\n              >\n                {genderMale}\n              </span>\n            </label>\n            <label\n              className=\"form-recom__label\"\n              htmlFor=\"formRecommendationGirl\"\n            >\n              <input\n                id=\"formRecommendationGirl\"\n                className=\"form-recom__input-radio\"\n                type=\"radio\"\n                name=\"gender\"\n                onChange={handleChange}\n                value=\"female\"\n                required\n              />\n              <span\n                className={`form-recom__pseudo-radio ${\n                  errors?.gender ? 'form-recom__pseudo-radio_error' : ''\n                }`}\n              >\n                {genderFemale}\n              </span>\n            </label>\n\n            <Input\n              id=\"formRecommendAge\"\n              sectionClass=\"form-recom__input-wrap form-recom__input-wrap_narrow\"\n              type=\"number\"\n              name=\"age\"\n              placeholder={agePlaceholder}\n              onChange={handleChange}\n              value={values.age}\n              required\n              max={validationSettings.age.max}\n              min={validationSettings.age.min}\n              error={errors?.age}\n            />\n          </div>\n\n          <DropDownSelect\n            placeholder={activityPlaceholder}\n            options={activityTypes}\n            inputName=\"activityType\"\n            onChange={handleChange}\n            error={errors?.activityType}\n            isFormOpen={isOpen}\n          />\n\n          <DropDownSelect\n            placeholder={cityPlaceholder}\n            options={cities}\n            inputName=\"city\"\n            onChange={handleChange}\n            error={errors?.city}\n            isFormOpen={isOpen}\n          />\n\n          <Input\n            id=\"formRecommendDescription\"\n            sectionClass=\"form-recom__input form-recom__input_textarea\"\n            type=\"text\"\n            name=\"description\"\n            placeholder={textAreaPlaceholder}\n            onChange={handleChange}\n            value={values.description}\n            required\n            error={errors?.description}\n            isTextarea\n          />\n\n          <span className=\"form-error-message\">{errorsString}</span>\n\n          <div className=\"form-recom__submit-zone\">\n            <div className=\"form-recom__add-photo\">\n              {errors?.image && (\n                <span className=\"form-recom__add-photo-error\">\n                  {errors?.image}\n                </span>\n              )}\n              <div className=\"form-recom__add-photo-container\">\n                {values?.image && (\n                  <span className=\"form-recom__add-photo-span form-recom__add-photo-span_text\">\n                    {addPhotoAdded}\n                  </span>\n                )}\n                <label\n                  className=\"form-recom__add-photo-label\"\n                  htmlFor=\"formRecomInputUpload\"\n                >\n                  <input\n                    id=\"formRecomInputUpload\"\n                    type=\"file\"\n                    name=\"image\"\n                    accept=\"image/png, image/jpeg\"\n                    className=\"form-recom__input-radio\"\n                    onChange={(evt) => handleChangeFiles(evt, regExpImages)}\n                    required\n                  />\n                  {!values?.image && (\n                    <ButtonRound\n                      sectionClass={`form-recom__add-photo-btn ${\n                        errors?.image ? 'form-recom__add-photo-btn_error' : ''\n                      }`}\n                      color={`${errors?.image ? 'error' : 'lightGray'}`}\n                      isSmall\n                      isSpan\n                    />\n                  )}\n                  <span\n                    className={`form-recom__add-photo-span ${\n                      errors?.image ? 'form-recom__add-photo-span_error' : ''\n                    }`}\n                  >\n                    {values?.image ? addPhotoBtnChange : addPhotoBtnDefault}\n                  </span>\n                </label>\n              </div>\n            </div>\n\n            <Button\n              title={isWaitingResponse ? buttonTextLoading : buttonText}\n              color=\"blue\"\n              isDisabled={isWaitingResponse || !isValid}\n              isSubmittable\n            />\n          </div>\n        </>\n      )}\n    </form>\n  );\n}\n\nFormRecommendation.propTypes = {\n  activityTypes: PropTypes.arrayOf(PropTypes.object),\n  isOpen: PropTypes.bool,\n  onSubmit: PropTypes.func,\n  isWaitingResponse: PropTypes.bool,\n};\n\nFormRecommendation.defaultProps = {\n  activityTypes: [],\n  isOpen: false,\n  onSubmit: () => {},\n  isWaitingResponse: false,\n};\n\nexport default FormRecommendation;\n","import { useContext, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport texts from './locales/RU';\nimport { ErrorsContext } from '../../contexts';\nimport { ERROR_CODES, ERROR_MESSAGES } from '../../config/constants';\nimport FormRecommendation from '../FormRecommendation/FormRecommendation';\nimport { postPlace } from '../../api/places-page';\nimport './PlacesRecommend.scss';\n\nfunction PlacesRecommend({ sectionClass, activityTypes, openSuccessPopup }) {\n  const { setError } = useContext(ErrorsContext);\n  const { generalErrorMessage } = ERROR_MESSAGES;\n  const { unauthorized, badRequest } = ERROR_CODES;\n\n  const [isFormOpen, setIsFormOpen] = useState(false);\n  const [isWaitingResponse, setIsWaitingResponse] = useState(false);\n\n  const scrollAnchorRef = useRef(null);\n  const scrollToForm = () => {\n    scrollAnchorRef.current.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  const closeForm = () => {\n    setIsFormOpen(false);\n  };\n\n  const openForm = () => {\n    setIsFormOpen(true);\n    scrollToForm();\n  };\n\n  const createFormData = (data) => {\n    const formData = new FormData();\n    if (data.link) formData.append('link', data.link);\n    formData.append('image', data.image);\n    formData.append('title', data.title);\n    formData.append('description', data.description);\n    formData.append('address', data.address);\n    formData.append('gender', data.gender);\n    formData.append('age', data.age);\n    formData.append('city', data.city);\n    formData.append('activityType', data.activityType);\n    return formData;\n  };\n\n  const handleFormSubmit = (data) => {\n    setIsWaitingResponse(true);\n    postPlace(createFormData(data))\n      .then(() => {\n        openSuccessPopup();\n        closeForm();\n      })\n      .catch((err) => {\n        if (err?.status === badRequest || err?.status === unauthorized) {\n          setError(err?.data);\n        } else\n          setError({\n            message: generalErrorMessage.title,\n          });\n      })\n      .finally(() => setIsWaitingResponse(false));\n  };\n\n  const classNames = [\n    'recommendation',\n    'recommendation_place_page',\n    'fade-in',\n    sectionClass,\n  ]\n    .join(' ')\n    .trim();\n\n  return (\n    <>\n      <section className={classNames} ref={scrollAnchorRef}>\n        <div className=\"recommendation__container\">\n          {isFormOpen && (\n            <button\n              className=\"recommendation__close-button\"\n              type=\"button\"\n              aria-label={texts.closeButtonlabel}\n              onClick={closeForm}\n            />\n          )}\n          <p className=\"section-title recommendation__text\">\n            {texts.recommendadionTextPart1}\n            <button\n              className=\"recommendation__text-link\"\n              type=\"button\"\n              onClick={openForm}\n            >\n              {texts.recommendadionButton}\n            </button>\n            {texts.recommendadionTextPart2}\n          </p>\n          <FormRecommendation\n            isOpen={isFormOpen}\n            onSubmit={handleFormSubmit}\n            activityTypes={activityTypes}\n            isWaitingResponse={isWaitingResponse}\n          />\n        </div>\n      </section>\n    </>\n  );\n}\n\nPlacesRecommend.propTypes = {\n  activityTypes: PropTypes.arrayOf(PropTypes.object),\n  sectionClass: PropTypes.string,\n  openSuccessPopup: PropTypes.func,\n};\n\nPlacesRecommend.defaultProps = {\n  activityTypes: [],\n  sectionClass: '',\n  openSuccessPopup: () => {},\n};\n\nexport default PlacesRecommend;\n","import { useContext, useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport placesPageTexts from './locales/RU';\nimport { ageFilters, PAGE_SIZE_PAGINATE } from './constants';\nimport {\n  CurrentUserContext,\n  ErrorsContext,\n  PopupsContext,\n} from '../../contexts';\nimport { useActivityTypes, useDebounce, useLocalStorage } from '../../hooks';\nimport {\n  ALL_CATEGORIES,\n  COLORS,\n  DELAY_DEBOUNCE,\n  DELAY_RENDER,\n  ERROR_MESSAGES,\n  localStUserCity,\n} from '../../config/constants';\nimport {\n  deselectAllTags,\n  deselectOneTag,\n  handleCheckboxBehavior,\n  selectOneTag,\n} from '../../utils/filter-tags';\nimport { changeCaseOfFirstLetter } from '../../utils/utils';\nimport {\n  getChosenPlace,\n  getPlace,\n  getPlaces,\n  getPlacesTags,\n} from '../../api/places-page';\nimport {\n  AnimatedPageContainer,\n  BasePage,\n  CardPlace,\n  Loader,\n  NoDataNotificationBox,\n  Paginate,\n  PlacesRecommend,\n  PopupPlace,\n  TagsList,\n  TitleH1,\n} from './index';\nimport './Places.scss';\nimport { PopupRecommendSuccess } from '../../components/Popups';\n\nconst {\n  headTitle,\n  headDescription,\n  title,\n  textStubNoData,\n  paragraphNoContent,\n  mentorTag,\n} = placesPageTexts;\n\nconst maxScreenWidth = {\n  small: 1024,\n};\n\nfunction Places() {\n  const { state } = useLocation();\n  const searchPlaceId = state?.id;\n  const [searchedPlace, setSearchedPlace] = useState({});\n\n  const { activityTypes, activityTypesSimplified } = useActivityTypes();\n\n  const { currentUser } = useContext(CurrentUserContext);\n  const { openPopupCities, openPopupError } = useContext(PopupsContext);\n  const { setError } = useContext(ErrorsContext);\n\n  const getLocalStorageItem = useLocalStorage(localStUserCity);\n\n  // сохранённый в localStorage город анонимуса\n  const currentAnonymousCity = getLocalStorageItem();\n  const userCity = currentUser?.city ?? currentAnonymousCity;\n\n  // места из API\n  const [places, setPlaces] = useState(null);\n  const [chosenPlace, setChosenPlace] = useState(null);\n  const [isChosenOnPageOne, setIsChosenOnPageOne] = useState(false);\n  const [isPageError, setIsPageError] = useState(false);\n\n  const [isLoadingPage, setIsLoadingPage] = useState(true);\n  // переход между фильтрами, лоадер\n  const [isLoadingFilters, setIsLoadingFilters] = useState(false);\n  // переход пагинаций без фильтров, лоадер\n  const [isLoadingPaginate, setIsLoadingPaginate] = useState(false);\n  // переход между городами, лоадер\n  const [isCityChanging, setIsCityChanging] = useState(false);\n  // триггер фильтра для useEffect\n  const [isFiltersUsed, setIsFiltersUsed] = useState(false);\n  // видна ли главная карточка\n  const [isChosenCardHidden, setIsChosenCardHidden] = useState(false);\n  // стейт для определения первой отрисовки страницы (нужен при отсутствии данных)\n  const [isFirstRender, setIsFirstRender] = useState(false);\n  // категории фильтрации\n  const [ages, setAges] = useState(ageFilters); // состояние кнопок фильтра возраста\n  const [categories, setCategories] = useState([]); // состояние кнопок фильтра категорий\n\n  // попапы страницы\n  const [isPlacePopupOpen, setIsPlacePopupOpen] = useState(false);\n  const [isPopupRecommendSuccessOpen, setIsPopupRecommendSuccessOpen] =\n    useState(false);\n\n  const openPopupPlace = () => {\n    setIsPlacePopupOpen(true);\n  };\n\n  const closePopupPlace = () => {\n    setIsPlacePopupOpen(false);\n  };\n\n  const openPopupRecommendSuccess = () => {\n    setIsPopupRecommendSuccessOpen(true);\n  };\n\n  const closePopupRecommendSuccess = () => {\n    setIsPopupRecommendSuccessOpen(false);\n  };\n\n  // Стейты для пагинации\n  const [pageSize, setPageSize] = useState(null);\n  const [pageCount, setPageCount] = useState(0);\n  const [pageNumber, setPageNumber] = useState(0);\n\n  // Резайз пагинации при первой загрузке\n  useEffect(() => {\n    const smallQuery = window.matchMedia(\n      `(max-width: ${maxScreenWidth.small}px)`\n    );\n\n    const listener = () => {\n      if (smallQuery.matches) {\n        setPageSize(PAGE_SIZE_PAGINATE.small);\n      } else {\n        setPageSize(PAGE_SIZE_PAGINATE.big);\n      }\n    };\n    listener();\n\n    smallQuery.addEventListener('change', listener);\n\n    return () => {\n      smallQuery.removeEventListener('change', listener);\n    };\n  }, []);\n\n  // хэндлер клика по фильтру КАТЕГОРИИ\n  const changeCategory = (inputValue, isChecked) => {\n    if (inputValue === ALL_CATEGORIES) {\n      selectOneTag(setCategories, ALL_CATEGORIES);\n      deselectAllTags(setAges);\n    } else {\n      handleCheckboxBehavior(setCategories, { inputValue, isChecked });\n      deselectOneTag(setCategories, ALL_CATEGORIES);\n    }\n    setIsFiltersUsed(true);\n  };\n\n  // хэндлер клика по фильтру ВОЗРАСТ\n  const changeAge = (inputValue, isChecked) => {\n    handleCheckboxBehavior(setAges, { inputValue, isChecked });\n    setIsFiltersUsed(true);\n  };\n\n  // функция, определяющая теги категорий в зависимости от того, есть ли рубрика \"Выбор наставника\"\n  const defineCategories = (tags, chosenPlaceData) => {\n    const categoriesArray = tags.map((tag) => ({\n      filter: tag?.slug.toLowerCase(),\n      name: changeCaseOfFirstLetter(tag?.name),\n      isActive: false,\n    }));\n    if (chosenPlaceData) {\n      return [\n        { filter: ALL_CATEGORIES, name: ALL_CATEGORIES, isActive: true },\n        { filter: mentorTag, name: mentorTag, isActive: false },\n        ...categoriesArray,\n      ];\n    }\n    return [\n      { filter: ALL_CATEGORIES, name: ALL_CATEGORIES, isActive: true },\n      ...categoriesArray,\n    ];\n  };\n\n  // restOfPlaces - массив без главной карточки\n  const definePlaces = (placesData, isFiltered, mainCard) => {\n    const chosenCard = mainCard || chosenPlace;\n    let restOfPlaces = placesData;\n\n    // главная\n    if (pageNumber === 0 && !isFiltered) {\n      if (chosenCard?.chosen && !isFiltered) {\n        restOfPlaces = restOfPlaces.filter(\n          (place) => place?.id !== chosenCard?.id\n        );\n        if (restOfPlaces.length !== placesData.length) {\n          setIsChosenOnPageOne(true);\n        } else restOfPlaces.pop();\n      }\n      if (restOfPlaces.length === placesData.length) {\n        restOfPlaces.pop();\n      }\n    }\n    return { restOfPlaces };\n  };\n\n  const defineActiveTags = () => {\n    const activeCategories = categories.filter(\n      (category) => category.isActive && category.filter !== ALL_CATEGORIES\n    );\n\n    const activeTags = activeCategories\n      .filter((tag) => tag.filter !== mentorTag)\n      .map((tag) => tag.filter)\n      .join(',');\n\n    const activeAges = ages\n      .filter((age) => age.isActive)\n      .map((age) => age.filter)\n      .join(',');\n\n    const isMentorFlag = activeCategories.some(\n      (tag) => tag.filter === mentorTag\n    );\n\n    return {\n      activeCategories,\n      activeTags,\n      activeAges,\n      isMentorFlag,\n    };\n  };\n\n  // запрос отфильтрованного массива карточек\n  const getFilteredPlaces = (params, isFiltersActive) => {\n    const offset = isFiltersUsed ? 0 : pageSize * pageNumber;\n\n    const fixedPageSize =\n      pageNumber === 0 && !isFiltersActive ? pageSize + 1 : pageSize;\n\n    const fixedOffset =\n      pageNumber > 0 && chosenPlace && isChosenOnPageOne && !isFiltersActive\n        ? offset + 1\n        : offset;\n\n    getPlaces({ limit: fixedPageSize, offset: fixedOffset, ...params })\n      .then(({ results, count }) => {\n        if (chosenPlace && !isFiltersActive) {\n          setPageCount(Math.ceil((count - 1) / pageSize));\n        } else {\n          setPageCount(Math.ceil(count / pageSize));\n        }\n\n        const { restOfPlaces } = definePlaces(results, isFiltersActive);\n\n        if (pageNumber > 0 || isFiltersActive) {\n          setIsChosenCardHidden(true);\n        }\n\n        setPlaces(restOfPlaces);\n      })\n      .catch(() => {\n        if (isFiltersUsed) {\n          setError(ERROR_MESSAGES.filterErrorMessage);\n          openPopupError();\n        } else {\n          setIsPageError(true);\n        }\n      })\n      .finally(() => {\n        setIsLoadingFilters(false);\n        setIsLoadingPaginate(false);\n        setIsFiltersUsed(false);\n      });\n  };\n\n  // функция-фильтратор\n  const handleFiltration = () => {\n    setIsFirstRender(false);\n\n    const { activeCategories, activeTags, activeAges, isMentorFlag } =\n      defineActiveTags();\n\n    // ВСЕ\n    if (activeCategories.length === 0) {\n      if (activeAges.length === 0) {\n        // + БЕЗ ВОЗРАСТА (по умолчанию)\n        getFilteredPlaces(\n          {\n            city: userCity,\n          },\n          false\n        );\n        setIsChosenCardHidden(false);\n      } else {\n        // + ВОЗРАСТ\n        getFilteredPlaces(\n          {\n            age_restriction: activeAges,\n            city: userCity,\n          },\n          true\n        );\n      }\n\n      selectOneTag(setCategories, ALL_CATEGORIES);\n      return;\n    }\n\n    // КАТЕГОРИИ + ВОЗРАСТ (или без него)\n    if (activeCategories.length > 0) {\n      getFilteredPlaces(\n        {\n          chosen: isMentorFlag,\n          tags: activeTags,\n          age_restriction: activeAges,\n          city: userCity,\n        },\n        true\n      );\n    }\n  };\n\n  const debounceFiltration = useDebounce(handleFiltration, DELAY_DEBOUNCE);\n  const debouncePagination = useDebounce(getFilteredPlaces, DELAY_DEBOUNCE);\n  // запуск фильтрации\n  useEffect(() => {\n    if (!isLoadingPage && isFiltersUsed) {\n      setIsLoadingFilters(true);\n      debounceFiltration();\n    }\n    setIsLoadingPage(false);\n  }, [isFiltersUsed, pageNumber]);\n\n  // запуск пагинации\n  useEffect(() => {\n    if (!isLoadingPage && !isFiltersUsed) {\n      const { activeTags, activeAges, isMentorFlag } = defineActiveTags();\n      // для пагинации, чтобы сохранить настройки фильтров\n      const predefinedParams = {\n        chosen: isMentorFlag,\n        tags: activeTags,\n        age_restriction: activeAges,\n        city: userCity,\n      };\n\n      if (!activeTags && !activeAges && !isMentorFlag) {\n        if (pageNumber === 0) setIsChosenCardHidden(false);\n        debouncePagination(predefinedParams, false);\n      } else {\n        debouncePagination(predefinedParams, true);\n      }\n\n      setIsLoadingPaginate(true);\n    }\n  }, [pageNumber]);\n\n  // Promise.all нужен для формирования тега \"Выбор наставников\" по метке на карточках\n  useEffect(() => {\n    if (userCity && pageSize) {\n      window.scroll({ top: 0 });\n      setIsFirstRender(true);\n      setIsCityChanging(true);\n      setIsChosenCardHidden(false);\n      setChosenPlace(null);\n      setPlaces(null);\n      deselectAllTags(setAges);\n\n      Promise.all([\n        getChosenPlace({ city: userCity }),\n        getPlaces({\n          city: userCity,\n          limit: pageSize + 1,\n        }),\n        getPlacesTags(),\n      ])\n        .then(([mainCard, { results, count }, tagsData]) => {\n          if (mainCard?.chosen) {\n            setChosenPlace(mainCard);\n          }\n          // стейт главной карточки не успевает обновиться, поэтому передаем аргументом\n          // второй агрумент - это используется ли фильтр или пагинация\n          const { restOfPlaces } = definePlaces(results, false, mainCard);\n          setPlaces(restOfPlaces);\n\n          if (mainCard?.chosen) {\n            setPageCount(Math.ceil((count - 1) / pageSize));\n          } else {\n            setPageCount(Math.ceil(count / pageSize));\n          }\n\n          setCategories(defineCategories(tagsData, mainCard?.chosen));\n        })\n        .catch(() => setIsPageError(true))\n        .finally(() => setIsCityChanging(false));\n    }\n  }, [userCity, pageSize]);\n\n  useEffect(() => {\n    if (!userCity) {\n      setTimeout(() => {\n        openPopupCities();\n      }, DELAY_RENDER);\n    }\n\n    if (state && userCity) {\n      getPlace(searchPlaceId)\n        .then((place) => {\n          setSearchedPlace(place);\n          openPopupPlace();\n        })\n        .catch(() => setIsPageError(true));\n    }\n  }, [state]);\n\n  if (!places) {\n    return <Loader isCentered />;\n  }\n\n  return (\n    <>\n      <BasePage headTitle={headTitle} headDescription={headDescription}>\n        <section className=\"places page__section fade-in\">\n          {renderPageContent()}\n        </section>\n      </BasePage>\n      <PopupPlace\n        isOpen={isPlacePopupOpen}\n        onClose={closePopupPlace}\n        place={searchedPlace}\n        activityTypesSimplified={activityTypesSimplified}\n      />\n      <PopupRecommendSuccess\n        isOpen={isPopupRecommendSuccessOpen}\n        onClose={closePopupRecommendSuccess}\n      />\n    </>\n  );\n\n  // функции рендера\n  function renderAnimatedContainer() {\n    return (\n      <>\n        {!isCityChanging ? (\n          <>\n            <AnimatedPageContainer titleText={textStubNoData} />\n            {currentUser && <PlacesRecommend activityTypes={activityTypes} />}\n          </>\n        ) : (\n          <Loader isPaginate />\n        )}\n      </>\n    );\n  }\n\n  function renderPagination() {\n    if (pageCount > 1) {\n      return (\n        <Paginate\n          sectionClass=\"cards-section__pagination\"\n          pageCount={pageCount}\n          value={pageNumber}\n          onChange={setPageNumber}\n        />\n      );\n    }\n    return null;\n  }\n\n  function renderPlaces() {\n    if (isChosenCardHidden && places?.length === 0) {\n      return (\n        <NoDataNotificationBox\n          text={paragraphNoContent}\n          sectionClass=\"no-data-text_padding-top\"\n        />\n      );\n    }\n\n    if (chosenPlace || places?.length > 0) {\n      return (\n        <>\n          {chosenPlace && !isChosenCardHidden && !isLoadingPaginate && (\n            <section className=\"places__main\">\n              <CardPlace\n                key={chosenPlace?.id}\n                data={chosenPlace}\n                activityTypesSimplified={activityTypesSimplified}\n                sectionClass=\"card-container_type_main-article scale-in\"\n                isBig\n              />\n            </section>\n          )}\n\n          {!isLoadingPaginate ? (\n            <section className=\"places__cards-grid\">\n              {places.map((place, i) => (\n                <CardPlace\n                  key={place?.id}\n                  data={place}\n                  activityTypesSimplified={activityTypesSimplified}\n                  color={COLORS[(i + 1) % COLORS.length]}\n                  sectionClass=\"card-container_type_article scale-in\"\n                />\n              ))}\n            </section>\n          ) : (\n            <Loader isPaginate />\n          )}\n          {renderPagination()}\n        </>\n      );\n    }\n    return null;\n  }\n\n  function renderPageContent() {\n    if (isPageError) {\n      return (\n        <AnimatedPageContainer\n          titleText={ERROR_MESSAGES.generalErrorMessage.title}\n        />\n      );\n    }\n    if (isFirstRender && !chosenPlace && places?.length === 0) {\n      return renderAnimatedContainer();\n    }\n    return (\n      <>\n        <TitleH1 title={title} sectionClass=\"places__title\" />\n        {!isCityChanging ? (\n          <>\n            <TagsList\n              filterList={categories}\n              name=\"categories\"\n              handleClick={changeCategory}\n            />\n            <TagsList\n              filterList={ages}\n              name=\"ages\"\n              handleClick={changeAge}\n              sectionClass=\"places__tags\"\n            />\n            {currentUser && (\n              <PlacesRecommend\n                activityTypes={activityTypes}\n                openSuccessPopup={openPopupRecommendSuccess}\n              />\n            )}\n\n            {!isLoadingFilters ? renderPlaces() : <Loader isPaginate />}\n          </>\n        ) : (\n          <Loader isPaginate />\n        )}\n      </>\n    );\n  }\n}\n\nexport default Places;\n"],"sourceRoot":""}